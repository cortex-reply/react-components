"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[274],{"./src/components/Chat/Components/Oauth.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Closed:()=>Closed,CustomDescription:()=>CustomDescription,Default:()=>Default,LongUrl:()=>LongUrl,NoDescription:()=>NoDescription,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Chat/Components/OAuth Modal",component:__webpack_require__("./src/components/Chat/Components/Oauth.tsx").L,parameters:{layout:"centered",docs:{description:{component:"A modal component for handling OAuth authentication flows. Opens a popup window for OAuth authentication and handles success/error states."}}},argTypes:{isOpen:{control:"boolean",description:"Whether the modal is open or closed"},authUrl:{control:"text",description:"The OAuth authentication URL to open in the popup"},onClose:{action:"onClose",description:"Callback function called when the modal is closed"},onSuccess:{action:"onSuccess",description:"Callback function called when authentication is successful"},description:{control:"text",description:"Optional description text shown in the modal"}}},Default={name:"Basic OAuth Modal",args:{isOpen:!0,authUrl:"https://accounts.google.com/oauth/authorize?client_id=123&redirect_uri=callback&scope=email&response_type=code",description:"This endpoint requires authentication to sync functions."},parameters:{docs:{description:{story:"Default OAuth modal with Google OAuth URL example."}}}},NoDescription={name:"Without Description",args:{isOpen:!0,authUrl:"https://oauth.example.com/authorize?client_id=test123&response_type=code"},parameters:{docs:{description:{story:"OAuth modal without a specific endpoint name - shows generic messaging."}}}},CustomDescription={name:"Custom Description",args:{isOpen:!0,authUrl:"https://api.notion.com/v1/oauth/authorize?client_id=notion123&response_type=code&owner=user",endpointName:"Notion Workspace",description:"Connect to your Notion workspace to sync pages and databases with our AI assistant."},parameters:{docs:{description:{story:"OAuth modal with custom description text."}}}},LongUrl={name:"Long Authentication URL",args:{isOpen:!0,authUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=very-long-client-id-12345&response_type=code&redirect_uri=https://myapp.example.com/auth/microsoft/callback&scope=https://graph.microsoft.com/User.Read%20https://graph.microsoft.com/Files.ReadWrite&state=random_state_value_that_is_quite_long&prompt=consent",endpointName:"Microsoft Graph API",description:"Access your Microsoft 365 data including OneDrive files and user profile."},parameters:{docs:{description:{story:"OAuth modal with a very long authentication URL to test URL display handling."}}}},Closed={name:"Modal Closed",args:{isOpen:!1,authUrl:"https://oauth.example.com/authorize",endpointName:"Example API"},parameters:{docs:{description:{story:"OAuth modal in closed state - should render nothing."}}}},__namedExportsOrder=["Default","NoDescription","CustomDescription","LongUrl","Closed"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  name: 'Basic OAuth Modal',\n  args: {\n    isOpen: true,\n    authUrl: 'https://accounts.google.com/oauth/authorize?client_id=123&redirect_uri=callback&scope=email&response_type=code',\n    description: 'This endpoint requires authentication to sync functions.'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Default OAuth modal with Google OAuth URL example.'\n      }\n    }\n  }\n}",...Default.parameters?.docs?.source}}},NoDescription.parameters={...NoDescription.parameters,docs:{...NoDescription.parameters?.docs,source:{originalSource:"{\n  name: 'Without Description',\n  args: {\n    isOpen: true,\n    authUrl: 'https://oauth.example.com/authorize?client_id=test123&response_type=code'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'OAuth modal without a specific endpoint name - shows generic messaging.'\n      }\n    }\n  }\n}",...NoDescription.parameters?.docs?.source}}},CustomDescription.parameters={...CustomDescription.parameters,docs:{...CustomDescription.parameters?.docs,source:{originalSource:"{\n  name: 'Custom Description',\n  args: {\n    isOpen: true,\n    authUrl: 'https://api.notion.com/v1/oauth/authorize?client_id=notion123&response_type=code&owner=user',\n    endpointName: 'Notion Workspace',\n    description: 'Connect to your Notion workspace to sync pages and databases with our AI assistant.'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'OAuth modal with custom description text.'\n      }\n    }\n  }\n}",...CustomDescription.parameters?.docs?.source}}},LongUrl.parameters={...LongUrl.parameters,docs:{...LongUrl.parameters?.docs,source:{originalSource:"{\n  name: 'Long Authentication URL',\n  args: {\n    isOpen: true,\n    authUrl: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=very-long-client-id-12345&response_type=code&redirect_uri=https://myapp.example.com/auth/microsoft/callback&scope=https://graph.microsoft.com/User.Read%20https://graph.microsoft.com/Files.ReadWrite&state=random_state_value_that_is_quite_long&prompt=consent',\n    endpointName: 'Microsoft Graph API',\n    description: 'Access your Microsoft 365 data including OneDrive files and user profile.'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'OAuth modal with a very long authentication URL to test URL display handling.'\n      }\n    }\n  }\n}",...LongUrl.parameters?.docs?.source}}},Closed.parameters={...Closed.parameters,docs:{...Closed.parameters?.docs,source:{originalSource:"{\n  name: 'Modal Closed',\n  args: {\n    isOpen: false,\n    authUrl: 'https://oauth.example.com/authorize',\n    endpointName: 'Example API'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'OAuth modal in closed state - should render nothing.'\n      }\n    }\n  }\n}",...Closed.parameters?.docs?.source}}}},"./src/components/Chat/Components/Oauth.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>OAuthModal});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js");const OAuthModal=({isOpen=!0,authUrl,onClose,onSuccess,description="This endpoint requires authentication to sync functions."})=>{const[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("");return isOpen?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-[90%] shadow-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-bold mb-3 text-primary",children:"Authentication Required"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:description}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-4 p-2 bg-red-50 border border-red-200 rounded text-red-600 text-xs",children:error}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:()=>{if(authUrl){setIsLoading(!0),setError("");try{const popup=window.open(authUrl,"oauth-popup","width=600,height=700,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,directories=no,status=no");if(!popup)return setError("Popup blocked. Please allow popups for this site and try again."),void setIsLoading(!1);const pollTimer=setInterval((()=>{try{popup.closed&&(clearInterval(pollTimer),setIsLoading(!1),onSuccess(),onClose())}catch(e){}}),1e3);setTimeout((()=>{popup.closed||(popup.close(),clearInterval(pollTimer),setIsLoading(!1),setError("Authentication timed out. Please try again."))}),6e5)}catch(err){setError("Failed to open authentication window"),setIsLoading(!1)}}else setError("No authentication URL provided")},disabled:isLoading||!authUrl,className:`\n              px-4 py-2 text-white border-none rounded text-sm font-bold flex-1\n              ${isLoading||!authUrl?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 cursor-pointer"}\n            `,children:isLoading?"Authenticating...":"Authenticate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(authUrl),setError("")}catch(err){setError("Failed to copy URL to clipboard")}},disabled:!authUrl,className:`\n              px-4 py-2 text-white border-none rounded text-sm\n              ${authUrl?"bg-blue-600 hover:bg-blue-700 cursor-pointer":"bg-gray-400 cursor-not-allowed"}\n            `,children:"Copy URL"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:onClose,className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white border-none rounded text-sm cursor-pointer",children:"Cancel"})]})]})}):null};OAuthModal.__docgenInfo={description:"",methods:[],displayName:"OAuthModal",props:{isOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},authUrl:{required:!0,tsType:{name:"string"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSuccess:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},description:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'This endpoint requires authentication to sync functions.'",computed:!1}}}}}}]);