"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[11],{"./src/components/Projects/EpicsView.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>EpicsView});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/card.tsx"),_components_ui_badge__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/ui/badge.tsx"),_components_ui_button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/ui/button.tsx"),_TaskCard__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/components/Projects/TaskCard.tsx"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/check.js"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/x.js"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/pen.js"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/trash-2.js"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/plus.js"),_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/move.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/ui/textarea.tsx"),_Heros_DashboardHero_DashboardHero__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Heros/DashboardHero/DashboardHero.tsx"),_lib_utils_extract_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/extract-id.ts");const EpicsView=({tasks,epics,sprints,onUpdateTask,onTaskClick,onAddTaskToEpic,onAddEpic,onUpdateEpic,onDeleteEpic})=>{const[draggedTask,setDraggedTask]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[editingEpic,setEditingEpic]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[editForm,setEditForm]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),[heroHeight,setHeroHeight]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),heroRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),containerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const measureHeroHeight=()=>{if(heroRef.current){const height=heroRef.current.offsetHeight;setHeroHeight(height)}};measureHeroHeight();const resizeObserver=new ResizeObserver(measureHeroHeight);heroRef.current&&resizeObserver.observe(heroRef.current);const handleStorageChange=()=>{setTimeout(measureHeroHeight,100)};return window.addEventListener("storage",handleStorageChange),()=>{resizeObserver.disconnect(),window.removeEventListener("storage",handleStorageChange)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const timer=setTimeout((()=>{heroRef.current&&setHeroHeight(heroRef.current.offsetHeight)}),300);return()=>clearTimeout(timer)}),[editingEpic]);const handleDragStart=task=>{setDraggedTask(task)},handleDragOver=e=>{e.preventDefault()},handleSaveEdit=()=>{editingEpic&&editForm.name&&(onUpdateEpic(editingEpic.toString(),editForm),setEditingEpic(null),setEditForm({}))},handleCancelEdit=()=>{setEditingEpic(null),setEditForm({})},getConfidenceColor=confidence=>{switch(confidence){case"high":return"bg-success/10 text-success";case"medium":return"bg-warning/10 text-warning";case"low":return"bg-destructive/10 text-destructive";default:return"bg-muted text-muted-foreground"}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:containerRef,className:"h-full flex flex-col px-2 md:px-4 py-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:heroRef,className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Heros_DashboardHero_DashboardHero__WEBPACK_IMPORTED_MODULE_3__.H,{title:"Epic Planning",description:"Organize and manage your project epics, track progress, and assign tasks.",gradient:"bg-gradient-to-r from-rose-600 via-pink-600 to-fuchsia-600",primaryAction:{label:"Add epic",onClick:onAddEpic}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 min-h-0 mt-8",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"h-full overflow-y-auto",style:{height:heroHeight>0?`calc(100vh - ${heroHeight+120}px)`:"calc(100vh - 12rem)"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 auto-rows-max",children:epics.map((epic=>{var _editForm_phase;const epicTasks=(epicId=epic.id.toString(),tasks.filter((task=>(0,_lib_utils_extract_id__WEBPACK_IMPORTED_MODULE_2__.d)(task.epic).toString()===epicId)));var epicId;const totalPoints=epicTasks.reduce(((sum,task)=>sum+(task.storyPoints||0)),0),availableHeight=heroHeight>0?`calc(100vh - ${heroHeight+200}px)`:"calc(100vh - 14rem)";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_card__WEBPACK_IMPORTED_MODULE_4__.Zp,{className:`flex flex-col ${editingEpic===epic.id.toString()?"h-auto":""} bg-card shadow-sm`,style:{height:editingEpic===epic.id.toString()?"auto":availableHeight,minHeight:"400px"},onDragOver:handleDragOver,onDrop:e=>((e,epicId)=>{e.preventDefault(),draggedTask&&(0,_lib_utils_extract_id__WEBPACK_IMPORTED_MODULE_2__.d)(draggedTask.epic).toString()!==epicId&&(onUpdateTask(draggedTask.id.toString(),{epic:Number(epicId)}),setDraggedTask(null))})(e,epic.id.toString()),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-4 border-b border-border",children:editingEpic===epic.id.toString()?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{value:editForm.name||"",onChange:e=>setEditForm({...editForm,name:e.target.value}),placeholder:"Epic name",className:"font-semibold"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 ml-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{size:"sm",variant:"ghost",onClick:handleSaveEdit,className:"p-1 h-8 w-8",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__.A,{className:"h-4 w-4"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{size:"sm",variant:"ghost",onClick:handleCancelEdit,className:"p-1 h-8 w-8",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__.A,{className:"h-4 w-4"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_9__.T,{value:editForm.description||"",onChange:e=>setEditForm({...editForm,description:e.target.value}),placeholder:"Epic description",className:"text-sm min-h-[60px]"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-xs text-muted-foreground",children:"Confidence"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("select",{value:editForm.confidence||epic.confidence,onChange:e=>setEditForm({...editForm,confidence:e.target.value}),className:"flex h-8 w-full rounded-md border border-input bg-background px-3 py-2 text-xs ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"low",children:"Low"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"medium",children:"Medium"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:"high",children:"High"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"text-xs text-muted-foreground",children:"Phase"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("select",{value:(null===(_editForm_phase=editForm.phase)||void 0===_editForm_phase?void 0:_editForm_phase.toString())||epic.phase.toString(),onChange:e=>setEditForm({...editForm,phase:parseInt(e.target.value)}),className:"flex h-8 w-full rounded-md border border-input bg-background px-3 py-2 text-xs ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[1,2,3,4,5,6,7,8,9].map((phase=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("option",{value:phase.toString(),children:["Phase ",phase]},phase)))})]})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:`w-4 h-4 rounded-full ${epic.color}`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-foreground select-none flex-1",children:epic.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{size:"sm",variant:"ghost",onClick:()=>(epic=>{setEditingEpic(epic.id.toString()),setEditForm({name:epic.name,description:epic.description,confidence:epic.confidence,phase:epic.phase})})(epic),className:"p-1 h-8 w-8",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__.A,{className:"h-3 w-3"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{size:"sm",variant:"ghost",onClick:()=>(epicId=>{window.confirm("Are you sure you want to delete this epic? This will also delete all associated tasks.")&&onDeleteEpic(epicId)})(epic.id.toString()),className:"p-1 h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__.A,{className:"h-3 w-3"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_12__.E,{className:`text-xs ${getConfidenceColor(epic.confidence)}`,children:[epic.confidence," confidence"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_12__.E,{variant:"outline",className:"text-xs",children:["Phase ",epic.phase]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_12__.E,{variant:"secondary",className:"text-xs bg-muted text-muted-foreground",children:[epicTasks.length," tasks"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_12__.E,{variant:"secondary",className:"text-xs bg-muted text-muted-foreground",children:[totalPoints," pts"]})]}),epic.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-muted-foreground mb-3 select-none",children:epic.description}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{onClick:()=>onAddTaskToEpic(epic.id.toString()),variant:"outline",size:"sm",className:"w-full gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__.A,{className:"h-4 w-4"}),"Add Task"]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-3 min-h-[200px] border-2 border-dashed rounded p-3 transition-colors "+(draggedTask?"border-primary bg-primary/10":"border-border"),children:0===epicTasks.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-muted-foreground border-2 border-dashed border-border rounded-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_Edit2_Move_Plus_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.A,{className:"h-8 w-8 mb-2"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-sm select-none",children:"Drop tasks here"})]}):epicTasks.map((task=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_TaskCard__WEBPACK_IMPORTED_MODULE_15__.y,{task,epic,onDragStart:handleDragStart,onTaskClick,isCompact:!0},task.id)))})})]},epic.id)}))})})})]})};EpicsView.__docgenInfo={description:"",methods:[],displayName:"EpicsView",props:{tasks:{required:!0,tsType:{name:"Array",elements:[{name:"Task"}],raw:"Task[]"},description:""},epics:{required:!0,tsType:{name:"Array",elements:[{name:"Epic"}],raw:"Epic[]"},description:""},sprints:{required:!0,tsType:{name:"Array",elements:[{name:"Sprint"}],raw:"Sprint[]"},description:""},onUpdateTask:{required:!0,tsType:{name:"signature",type:"function",raw:"(taskId: string, updates: Partial<Task>) => void",signature:{arguments:[{type:{name:"string"},name:"taskId"},{type:{name:"Partial",elements:[{name:"Task"}],raw:"Partial<Task>"},name:"updates"}],return:{name:"void"}}},description:""},onTaskClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(task: Task) => void",signature:{arguments:[{type:{name:"Task"},name:"task"}],return:{name:"void"}}},description:""},onAddTaskToEpic:{required:!0,tsType:{name:"signature",type:"function",raw:"(epicId: string) => void",signature:{arguments:[{type:{name:"string"},name:"epicId"}],return:{name:"void"}}},description:""},onAddEpic:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onUpdateEpic:{required:!0,tsType:{name:"signature",type:"function",raw:"(epicId: string, updates: Partial<Epic>) => void",signature:{arguments:[{type:{name:"string"},name:"epicId"},{type:{name:"Partial",elements:[{name:"Epic"}],raw:"Partial<Epic>"},name:"updates"}],return:{name:"void"}}},description:""},onDeleteEpic:{required:!0,tsType:{name:"signature",type:"function",raw:"(epicId: string) => void",signature:{arguments:[{type:{name:"string"},name:"epicId"}],return:{name:"void"}}},description:""}}}}}]);