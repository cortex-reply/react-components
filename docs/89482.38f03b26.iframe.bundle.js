"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[89482],{"./src/components/AdvancedComponents/EditableField.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>EditableField});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/textarea.tsx"),_components_ui_label__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/label.tsx"),_barrel_optimize_names_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/square-pen.js");const EditableField=({fieldName,value,label,multiline=!1,onSave,className="",disabled=!1})=>{const[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[tempValue,setTempValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),handleSave=async()=>{tempValue!==value&&await onSave(fieldName,tempValue),setIsEditing(!1)},handleKeyPress=e=>{"Enter"!==e.key||multiline?"Enter"===e.key&&e.ctrlKey&&multiline?handleSave():"Escape"===e.key&&(setIsEditing(!1),setTempValue("")):handleSave()};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`space-y-2 ${className}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_2__.J,{children:label}),isEditing?multiline?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_3__.T,{value:tempValue,onChange:e=>setTempValue(e.target.value),onBlur:handleSave,onKeyDown:handleKeyPress,autoFocus:!0,rows:4,className:"resize-none"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.p,{value:tempValue,onChange:e=>setTempValue(e.target.value),onBlur:handleSave,onKeyPress:handleKeyPress,autoFocus:!0,className:"text-lg font-medium"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{onClick:()=>{disabled||(setIsEditing(!0),setTempValue(value))},className:`${disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} hover:bg-muted/50 p-2 rounded border border-transparent hover:border-border transition-colors group ${multiline?"min-h-[100px]":"min-h-[40px]"} flex items-start gap-2`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:multiline?"text-sm text-muted-foreground":"text-lg font-medium text-foreground",children:value||"Click to edit..."}),!disabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]})};EditableField.__docgenInfo={description:"",methods:[],displayName:"EditableField",props:{fieldName:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},multiline:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(fieldName: string, value: string) => void | Promise<void>",signature:{arguments:[{type:{name:"string"},name:"fieldName"},{type:{name:"string"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./src/components/Foundary/RichText/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Foundary_RichText});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),LexicalAutoFocusPlugin_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalAutoFocusPlugin.prod.mjs"),LexicalComposer_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalComposer.prod.mjs"),LexicalContentEditable_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalContentEditable.prod.mjs"),LexicalErrorBoundary_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalErrorBoundary.prod.mjs"),LexicalHistoryPlugin_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalHistoryPlugin.prod.mjs"),LexicalRichTextPlugin_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalRichTextPlugin.prod.mjs"),LexicalListPlugin_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalListPlugin.prod.mjs"),LexicalList_prod=__webpack_require__("./node_modules/.pnpm/@lexical+list@0.35.0/node_modules/@lexical/list/LexicalList.prod.mjs"),LexicalRichText_prod=__webpack_require__("./node_modules/.pnpm/@lexical+rich-text@0.35.0/node_modules/@lexical/rich-text/LexicalRichText.prod.mjs"),LexicalOnChangePlugin_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalOnChangePlugin.prod.mjs"),react=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),LexicalComposerContext_prod=__webpack_require__("./node_modules/.pnpm/@lexical+react@0.35.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_yjs@13.6.21/node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),LexicalUtils_prod=__webpack_require__("./node_modules/.pnpm/@lexical+utils@0.35.0/node_modules/@lexical/utils/LexicalUtils.prod.mjs"),Lexical_prod=__webpack_require__("./node_modules/.pnpm/lexical@0.35.0/node_modules/lexical/Lexical.prod.mjs"),LexicalSelection_prod=__webpack_require__("./node_modules/.pnpm/@lexical+selection@0.35.0/node_modules/@lexical/selection/LexicalSelection.prod.mjs"),rotate_ccw=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/rotate-ccw.js"),rotate_cw=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/rotate-cw.js"),align_left=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/align-left.js"),align_center=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/align-center.js"),align_right=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/align-right.js"),align_justify=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/align-justify.js"),list=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/list.js"),list_ordered=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/list-ordered.js"),image_up=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/image-up.js"),chevron_down=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-down.js"),plus=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/plus.js"),input=__webpack_require__("./src/components/ui/input.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),dialog=__webpack_require__("./src/components/ui/dialog.tsx"),dist=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-dialog@1.1.4_@types+react-dom@19.0.2_@types+react@19.0.2__@types+react@_5b818d6da082a87ccafa69e5e1eacf4a/node_modules/@radix-ui/react-dialog/dist/index.mjs"),client=__webpack_require__("./node_modules/.pnpm/@payloadcms+richtext-lexical@3.56.0_@faceless-ui+modal@3.0.0-beta.2_react-dom@19.0.0_re_406050f8c6945f148768e229b4e187f9/node_modules/@payloadcms/richtext-lexical/dist/exports/client/index.js"),objectid=__webpack_require__("./node_modules/.pnpm/bson-objectid@2.0.4/node_modules/bson-objectid/objectid.js"),objectid_default=__webpack_require__.n(objectid),exports_client=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.56.0_@types+react@19.0.2_monaco-editor@0.52.2_next@15.1.3_@babel+core@_ac3d5c9596df7e0f6761a3332558d977/node_modules/@payloadcms/ui/dist/exports/client/index.js"),x=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/x.js"),tooltip=__webpack_require__("./src/components/ui/tooltip.tsx"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js"),process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");const Component=props=>{const{data:{relationTo,value},nodeKey}=props,[editor]=(0,LexicalComposerContext_prod.DF)(),[thumbnailUrl,setThumbnailUrl]=(0,react.useState)(""),[fileType,setFileType]=(0,react.useState)(""),[filesize,setFileSize]=(0,react.useState)("");(0,react.useEffect)((()=>{if("string"==typeof value)24===value.length?(async id=>{console.log("fetchMedia",id)})(value):(setThumbnailUrl(value||""),setFileSize(formatFileSize(getFileSize())),setFileType(getFileExtension()||""));else if("object"==typeof value){var _value_mimeType;setThumbnailUrl(`${process.env.NEXT_PUBLIC_API_URL}${value.url}`||""),setFileSize(formatFileSize(value.filesize)),setFileType((null===(_value_mimeType=value.mimeType)||void 0===_value_mimeType?void 0:_value_mimeType.split("/")[1])||"")}}),[]);const removeUpload=(0,react.useCallback)((()=>{editor.update((()=>{var _$getNodeByKey;null===(_$getNodeByKey=(0,Lexical_prod.nsf)(nodeKey))||void 0===_$getNodeByKey||_$getNodeByKey.remove()}))}),[editor,nodeKey]),getFileExtension=()=>{const currVal=props.data.value;var _currVal_split_;return"string"==typeof currVal?null===(_currVal_split_=currVal.split(";base64")[0])||void 0===_currVal_split_?void 0:_currVal_split_.split("image/")[1]:""},getFileSize=()=>{const currVal=props.data.value;if("string"==typeof currVal){var _currVal_split_;const stringLength=(null===(_currVal_split_=currVal.split(",")[1])||void 0===_currVal_split_?void 0:_currVal_split_.length)||0;return 4*Math.ceil(stringLength/3)*.5624896334383812/1e3}return 0};function formatFileSize(bytes){if(bytes>=1e6){const mb=bytes/1e6;return`${mb>=10?Math.round(mb).toString():mb.toFixed(1)} MB`}return`${Math.floor(bytes/1e3)} KB`}return(0,jsx_runtime.jsx)("div",{className:"my-2",contentEditable:!1,children:(0,jsx_runtime.jsxs)("div",{className:"border border-slate-800 rounded-xl overflow-clip w-60 flex flex-col gap-2 bg-[#222222]",children:[(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 border-b border-b-slate-100/10",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1",children:props.data.value?(0,jsx_runtime.jsx)("img",{className:"object-cover m-0 w-full min-w-[115px] min-h-[105px]","data-lexical-upload-id":value,"data-lexical-upload-relation-to":relationTo,src:thumbnailUrl}):(0,jsx_runtime.jsx)(exports_client.ZHH,{})}),(0,jsx_runtime.jsx)(tooltip.Bc,{children:(0,jsx_runtime.jsxs)(tooltip.m_,{children:[(0,jsx_runtime.jsxs)(tooltip.k$,{className:"flex-1 flex justify-center items-center text-[#b5b5b5]",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-sm",children:"Media"}),(0,jsx_runtime.jsx)("button",{onClick:e=>{e.preventDefault(),removeUpload()},className:"flex-1 flex justify-center items-center",children:(0,jsx_runtime.jsx)(x.A,{width:24,height:24,strokeWidth:1})})]}),(0,jsx_runtime.jsx)(tooltip.ZI,{children:(0,jsx_runtime.jsx)("span",{children:"Remove image"})})]})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-center gap-4 py-3 flex-1 text-xs font-bold",children:[(0,jsx_runtime.jsx)("span",{className:"",children:null==fileType?void 0:fileType.toLocaleUpperCase()}),(0,jsx_runtime.jsx)("span",{children:filesize})]})]})})},RawUploadComponent=Component;function $convertUploadElement(domNode){if(domNode.hasAttribute("data-lexical-upload-relation-to")&&domNode.hasAttribute("data-lexical-upload-id")){const id=domNode.getAttribute("data-lexical-upload-id");if(id){return{node:$createMyUploadNode({fields:{},relationTo:"media",value:id})}}}return domNode.src.startsWith("file:///"),null}Component.__docgenInfo={description:"",methods:[],displayName:"Component",props:{data:{required:!0,tsType:{name:"UploadData"},description:""},nodeKey:{required:!0,tsType:{name:"string"},description:""}}};class UploadNode extends client._g{static importDOM(){return{img:()=>({conversion:$convertUploadElement,priority:0})}}static importJSON(serialized){var _serialized_value,_node_setFormat,_serialized_id;1===serialized.version&&(null==serialized||null===(_serialized_value=serialized.value)||void 0===_serialized_value?void 0:_serialized_value.id)&&(serialized.value=serialized.value.id),2!==serialized.version||(null==serialized?void 0:serialized.id)||(serialized.id=(new(objectid_default())).toHexString(),serialized.version=3);const node=$createMyUploadNode({id:null!==(_serialized_id=serialized.id)&&void 0!==_serialized_id?_serialized_id:(new(objectid_default())).toHexString(),fields:serialized.fields,relationTo:"media",value:serialized.value});return null===(_node_setFormat=node.setFormat)||void 0===_node_setFormat||_node_setFormat.call(node,serialized.format),node}decorate(){return(0,jsx_runtime.jsx)(RawUploadComponent,{data:this.__data,nodeKey:this.getKey()})}}function $createMyUploadNode(data){return new UploadNode({data})}const CAN_USE_DOM=void 0!==window.document&&void 0!==window.document.createElement,INSERT_UPLOAD_COMMAND=((0,Lexical_prod.guI)("INSERT_UPLOAD_WITH_DRAWER_COMMAND"),(0,Lexical_prod.guI)("INSERT_UPLOAD_COMMAND"));function InsertInlineImageDialog({activeEditor,onClose,isOpen=!1}){const hasModifier=(0,react.useRef)(!1),[open,setOpen]=(0,react.useState)(!0),[src,setSrc]=(0,react.useState)(""),[altText,setAltText]=(0,react.useState)(""),[showCaption,setShowCaption]=(0,react.useState)(!1),[position,setPosition]=(0,react.useState)("left"),isDisabled=""===src;(0,react.useEffect)((()=>{hasModifier.current=!1;const handler=e=>{hasModifier.current=e.altKey};return document.addEventListener("keydown",handler),()=>{document.removeEventListener("keydown",handler)}}),[activeEditor]),(0,react.useEffect)((()=>{open||onClose()}),[open]),(0,react.useEffect)((()=>{setOpen(isOpen)}),[isOpen]);const handleOnClick=()=>{(({editor,relationTo,replaceNodeKey,value})=>{replaceNodeKey?editor.update((()=>{const node=(0,Lexical_prod.nsf)(replaceNodeKey);node&&node.replace($createMyUploadNode({id:"",fields:{},relationTo:"media",value}))})):editor.dispatchCommand(INSERT_UPLOAD_COMMAND,{fields:null,relationTo:"media",value})})({editor:activeEditor,relationTo:"media",replaceNodeKey:null,value:{altText,src,showCaption,position}.src}),setOpen(!1),onClose()};return(0,jsx_runtime.jsx)(dialog.lG,{open,onOpenChange:value=>setOpen(value),children:(0,jsx_runtime.jsxs)(dialog.Cf,{children:[(0,jsx_runtime.jsxs)(dialog.c7,{children:[(0,jsx_runtime.jsx)(dialog.L3,{children:"Upload Image"}),(0,jsx_runtime.jsx)(dist.rr,{children:"Description"})]}),(0,jsx_runtime.jsxs)("div",{className:"",children:[(0,jsx_runtime.jsx)("div",{style:{marginBottom:"1em"},children:(0,jsx_runtime.jsx)(input.p,{type:"file",onChange:e=>(files=>{const reader=new FileReader;reader.onload=function(){return"string"==typeof reader.result&&setSrc(reader.result),""},null!==files&&files[0]&&reader.readAsDataURL(files[0])})(e.target.files),accept:"image/*","data-test-id":"image-modal-file-upload"})}),(0,jsx_runtime.jsx)("div",{style:{marginBottom:"1em"},children:(0,jsx_runtime.jsx)(input.p,{"aria-label":"Alt Text",placeholder:"Descriptive alternative text",onChange:e=>setAltText(e.currentTarget.value),value:altText,"data-test-id":"image-modal-alt-text-input"})}),(0,jsx_runtime.jsx)(ui_button.$,{"data-test-id":"image-modal-file-upload-btn",disabled:isDisabled,onClick:()=>handleOnClick(),children:"Confirm"})]})]})})}function InlineImagePlugin({captionsEnabled}){const[editor]=(0,LexicalComposerContext_prod.DF)();return(0,react.useEffect)((()=>{if(!editor.hasNodes([client._g]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return(0,LexicalUtils_prod.Sd)(editor.registerCommand(Lexical_prod.TgX,(event=>function onDragStart(event){if(!getImageNodeInSelection())return!1;const dataTransfer=event.dataTransfer;if(!dataTransfer)return!1;return dataTransfer.setData("text/plain","_"),!0}(event)),Lexical_prod.WgU),editor.registerCommand(Lexical_prod.riq,(event=>function onDragover(event){if(!getImageNodeInSelection())return!1;canDropImage(event)||event.preventDefault();return!0}(event)),Lexical_prod.AcJ),editor.registerCommand(Lexical_prod.Sr4,(event=>function onDrop(event,editor){const node=getImageNodeInSelection();if(!node)return!1;if(event.preventDefault(),canDropImage(event)){const range=function getDragSelection(event){let range;const target=event.target,targetWindow=null==target?null:9===target.nodeType?target.defaultView:target.ownerDocument.defaultView,domSelection=(targetWindow=>CAN_USE_DOM?(targetWindow||window).getSelection():null)(targetWindow);if(document.caretRangeFromPoint)range=document.caretRangeFromPoint(event.clientX,event.clientY);else{if(!event.rangeParent||null===domSelection)throw Error("Cannot get the selection when dragging");domSelection.collapse(event.rangeParent,event.rangeOffset||0),range=domSelection.getRangeAt(0)}return range}(event);node.remove();const rangeSelection=(0,Lexical_prod.uTE)();null!=range&&rangeSelection.applyDOMRange(range),(0,Lexical_prod.n1P)(rangeSelection)}return!0}(event)),Lexical_prod.WgU))}),[captionsEnabled,editor]),null}function getImageNodeInSelection(){const selection=(0,Lexical_prod.vJq)();if(!(0,Lexical_prod.RTZ)(selection))return null;const node=selection.getNodes()[0];return(0,client.mH)(node)?node:null}function canDropImage(event){const target=event.target;return!!(target&&target instanceof HTMLElement&&!target.closest("code, span.editor-image")&&target.parentElement&&target.parentElement.closest("div.ContentEditable__root"))}InsertInlineImageDialog.__docgenInfo={description:"",methods:[],displayName:"InsertInlineImageDialog",props:{activeEditor:{required:!0,tsType:{name:"LexicalEditor"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Bold=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M10.6772 15H6.27017V5.718H10.4172C12.6792 5.718 13.8492 6.602 13.8492 8.292C13.8492 9.098 13.1992 9.982 12.4712 10.216C13.3812 10.476 14.1742 11.256 14.1742 12.322C14.1742 14.09 12.9002 15 10.6772 15ZM8.46717 9.501H10.3262C11.3012 9.501 11.7042 9.046 11.7042 8.409C11.7042 7.72 11.2362 7.317 10.3392 7.317H8.46717V9.501ZM8.46717 11.061V13.401H10.4822C11.4702 13.401 11.9642 12.959 11.9642 12.218C11.9642 11.49 11.4702 11.061 10.4822 11.061H8.46717Z",fill:"currentColor"})}),Icons_Bold=Bold;Bold.__docgenInfo={description:"",methods:[],displayName:"Bold"};const Italic=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M11.311 14.2969L11.0327 15H6.18408L6.4624 14.2969C7.54639 14.2969 7.70752 14.209 7.83936 13.8721L10.8423 6.45996C10.8716 6.38672 10.8862 6.32812 10.8862 6.26953C10.8862 6.09375 10.6519 6.03516 9.80225 6.03516L10.0952 5.33203H14.9438L14.6509 6.03516C13.5669 6.03516 13.4204 6.12305 13.2886 6.45996L10.2856 13.8721C10.2563 13.9453 10.2271 14.0039 10.2271 14.0625C10.2271 14.2383 10.4614 14.2969 11.311 14.2969Z",fill:"currentColor"})}),Icons_Italic=Italic;Italic.__docgenInfo={description:"",methods:[],displayName:"Italic"};const Underline=()=>(0,jsx_runtime.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("path",{d:"M13.9656 11.256C13.9656 13.791 12.5096 15.156 10.0006 15.156C7.50461 15.156 6.03561 13.791 6.03561 11.23V5.718H7.76461V11.243C7.76461 12.868 8.50561 13.778 10.0006 13.778C11.4956 13.778 12.2496 12.868 12.2496 11.243V5.718H13.9656V11.256Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M5.09961 16.3H14.9016V16.95H5.09961V16.3Z",fill:"currentColor"})]}),Icons_Underline=Underline;Underline.__docgenInfo={description:"",methods:[],displayName:"Underline"};const Strikethrough=()=>(0,jsx_runtime.jsxs)("svg",{"aria-hidden":"true",className:"",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("path",{d:"M5.50756 12.76H7.42756C7.56256 14.215 8.82256 14.71 10.1576 14.71C11.4326 14.71 12.4226 14.14 12.4226 13.06C12.4226 12.28 11.9576 11.845 10.6676 11.605L8.70256 11.245C7.12756 10.96 5.85256 10.21 5.85256 8.335C5.85256 6.43 7.53256 5.11 9.87256 5.11C12.4226 5.11 13.9526 6.22 14.1626 8.23H12.2876C12.1526 7.18 11.2226 6.595 9.88756 6.595C8.59756 6.595 7.78756 7.27 7.78756 8.215C7.78756 9.1 8.34256 9.385 9.49756 9.61L11.5676 10.015C13.3226 10.345 14.3726 11.215 14.3726 12.94C14.3726 14.89 12.5876 16.18 10.2176 16.18C7.66756 16.18 5.70256 15.115 5.50756 12.76Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M4.99756 11.44H15.0026V12.19H4.99756V11.44Z",fill:"currentColor"})]}),StrikeThrough=Strikethrough;Strikethrough.__docgenInfo={description:"",methods:[],displayName:"Strikethrough"};const Subscript=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 13.258C16.7768 14.155 16.1398 14.532 15.2038 15C14.5538 15.325 14.2808 15.546 14.2418 15.78H16.7898V16.82H12.7208V16.339C12.7208 15.286 13.5918 14.675 14.3588 14.233C15.0868 13.83 15.4378 13.635 15.4378 13.232C15.4378 12.894 15.2038 12.686 14.8268 12.686C14.3848 12.686 14.1248 13.024 14.1118 13.427H12.7468C12.8248 12.426 13.5528 11.633 14.8398 11.633C15.9448 11.633 16.7768 12.257 16.7768 13.258Z",fill:"currentColor"})}),Icons_Subscript=Subscript;Subscript.__docgenInfo={description:"",methods:[],displayName:"Subscript"};const Superscript=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 7.252C16.7768 8.149 16.1398 8.526 15.2038 8.994C14.5538 9.319 14.2808 9.54 14.2418 9.774H16.7898V10.814H12.7208V10.333C12.7208 9.28 13.5918 8.669 14.3588 8.227C15.0868 7.824 15.4378 7.629 15.4378 7.226C15.4378 6.888 15.2038 6.68 14.8268 6.68C14.3848 6.68 14.1248 7.018 14.1118 7.421H12.7468C12.8248 6.42 13.5528 5.627 14.8398 5.627C15.9448 5.627 16.7768 6.251 16.7768 7.252Z",fill:"currentColor"})}),Icons_Superscript=Superscript;Superscript.__docgenInfo={description:"",methods:[],displayName:"Superscript"};const TextIcon=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"w-5 size-5",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M11.708 14.5H7.79785V13.9414H8.01367C9.00391 13.9414 9.15625 13.9033 9.15625 13.6113V6.70508H8.07715C6.82031 6.70508 6.73145 7.08594 6.28711 8.67285H5.80469L5.91895 6.12109H13.5869L13.7012 8.67285H13.2188C12.7744 7.08594 12.6855 6.70508 11.4287 6.70508H10.3496V13.6113C10.3496 13.9033 10.502 13.9414 11.4922 13.9414H11.708V14.5Z",fill:"currentColor"})}),H1=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"w-5 size-5",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M4.639 13.5V7.074H6.196V9.648H9.076V7.074H10.642V13.5H9.076V10.836H6.196V13.5H4.639ZM11.5656 9.045V8.019C12.6636 8.019 13.1316 7.731 13.2846 7.065H14.4006V13.5H12.8436V9.045H11.5656Z",fill:"currentColor"})}),H2=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"w-5 size-5",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM15.9796 8.973C15.9796 10.116 15.1696 10.656 14.0356 11.232C13.2256 11.646 12.8206 11.943 12.7846 12.294H15.9886V13.5H11.0566V12.951C11.0566 11.601 12.1636 10.845 13.1176 10.287C14.0356 9.756 14.5126 9.486 14.5126 8.946C14.5126 8.46 14.2156 8.145 13.6306 8.145C13.0186 8.145 12.6586 8.613 12.6226 9.198H11.1196C11.2186 7.947 12.1006 6.966 13.6396 6.966C15.0346 6.966 15.9796 7.785 15.9796 8.973Z",fill:"currentColor"})}),H3=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"w-5 size-5",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM16.1146 11.745C16.1146 12.744 15.2236 13.608 13.6126 13.608C12.0736 13.608 11.0926 12.762 10.9846 11.547H12.4696C12.5146 12.114 13.0006 12.456 13.6126 12.456C14.2876 12.456 14.6746 12.132 14.6746 11.619C14.6746 11.061 14.2426 10.836 13.6216 10.836H12.9826V9.738H13.6036C14.1526 9.738 14.5486 9.486 14.5486 8.937C14.5486 8.46 14.2156 8.127 13.6486 8.127C13.0366 8.127 12.6586 8.514 12.6226 9.045H11.1916C11.2726 7.929 12.1276 6.966 13.6666 6.966C15.1876 6.966 15.9706 7.848 15.9706 8.865C15.9706 9.603 15.5026 10.143 14.8186 10.269C15.6196 10.404 16.1146 10.971 16.1146 11.745Z",fill:"currentColor"})}),H4=()=>(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"w-5 size-5",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM15.1736 7.074V10.854H16.3706V12.033H15.1736V13.5H13.6796V12.033H10.5116V10.845L13.4996 7.074H15.1736ZM13.6796 8.46L11.8256 10.854H13.6796V8.46Z",fill:"currentColor"})});TextIcon.__docgenInfo={description:"",methods:[],displayName:"TextIcon"},H1.__docgenInfo={description:"",methods:[],displayName:"H1"},H2.__docgenInfo={description:"",methods:[],displayName:"H2"},H3.__docgenInfo={description:"",methods:[],displayName:"H3"},H4.__docgenInfo={description:"",methods:[],displayName:"H4"};var dropdown_menu=__webpack_require__("./src/components/ui/dropdown-menu.tsx"),cn=__webpack_require__("./src/utils/cn.ts");function Divider(){return(0,jsx_runtime.jsx)("span",{className:"border border-[#222222]"})}function ToolbarPlugin(){var _alignmentActions_find,_alignmentActions_find1,_headingOptions_find,_headingOptions_find1;const[editor]=(0,LexicalComposerContext_prod.DF)(),toolbarRef=(0,react.useRef)(null),[canUndo,setCanUndo]=(0,react.useState)(!1),[canRedo,setCanRedo]=(0,react.useState)(!1),[isBold,setIsBold]=(0,react.useState)(!1),[isItalic,setIsItalic]=(0,react.useState)(!1),[isUnderline,setIsUnderline]=(0,react.useState)(!1),[isStrikethrough,setIsStrikethrough]=(0,react.useState)(!1),[isSubscript,setIsSubscript]=(0,react.useState)(!1),[isSuperscript,setIsSuperscript]=(0,react.useState)(!1),[imageDialogOpen,setImageDialogOpen]=(0,react.useState)(!1),[alignment,setAlignment]=(0,react.useState)("left"),[blockType,setBlockType]=(0,react.useState)("p"),onHeadingSelect=value=>{editor.update((()=>{const selection=(0,Lexical_prod.vJq)();(0,Lexical_prod.I2P)(selection)&&("p"===value?(0,LexicalSelection_prod.zI)(selection,(()=>(0,Lexical_prod.lJ7)())):(0,LexicalSelection_prod.zI)(selection,(()=>(0,LexicalRichText_prod.fi)(value))))}))},$updateToolbar=(0,react.useCallback)((()=>{const selection=(0,Lexical_prod.vJq)();if((0,Lexical_prod.I2P)(selection)){var _anchorNode_getTopLevelElement;setIsBold(selection.hasFormat("bold")),setIsItalic(selection.hasFormat("italic")),setIsUnderline(selection.hasFormat("underline")),setIsStrikethrough(selection.hasFormat("strikethrough")),setIsSubscript(selection.hasFormat("subscript")),setIsSuperscript(selection.hasFormat("superscript"));const anchorNode=selection.anchor.getNode();let blockNode=anchorNode;for(;blockNode&&!(0,Lexical_prod.bSg)(blockNode)&&blockNode!==(0,Lexical_prod.NiT)();){const curr=blockNode.getParent();curr&&(blockNode=curr)}if(blockNode){const format=blockNode.getFormatType();setAlignment(format||"left")}const tag=null===(_anchorNode_getTopLevelElement=anchorNode.getTopLevelElement())||void 0===_anchorNode_getTopLevelElement?void 0:_anchorNode_getTopLevelElement.__tag;setBlockType(tag||"p")}}),[]);(0,react.useEffect)((()=>(0,LexicalUtils_prod.Sd)(editor.registerUpdateListener((({editorState})=>{editorState.read((()=>{$updateToolbar()}))})),editor.registerCommand(Lexical_prod.MvL,((_payload,_newEditor)=>($updateToolbar(),!1)),1),editor.registerCommand(Lexical_prod.KfJ,(payload=>(setCanUndo(payload),!1)),1),editor.registerCommand(Lexical_prod.WWb,(payload=>(setCanRedo(payload),!1)),1),(0,LexicalUtils_prod.Sd)(editor.registerCommand(INSERT_UPLOAD_COMMAND,(payload=>(editor.update((()=>{const selection=(0,Lexical_prod.vJq)()||(0,Lexical_prod.S1w)();if((0,Lexical_prod.I2P)(selection)){const uploadNode=$createMyUploadNode({id:payload.id,fields:payload.fields,relationTo:payload.relationTo,value:payload.value}),{focus}=selection,focusNode=focus.getNode();(0,LexicalUtils_prod.Pe)(uploadNode),(0,Lexical_prod.bSg)(focusNode)&&!focusNode.__first&&focusNode.remove()}})),!0)),Lexical_prod.jZM)))),[editor,$updateToolbar]);const toolbarActions=[[{label:"Undo",icon:(0,jsx_runtime.jsx)(rotate_ccw.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.ZKf,void 0)},disabled:!canUndo},{label:"Redo",icon:(0,jsx_runtime.jsx)(rotate_cw.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.ZKf,void 0)},disabled:!canRedo}],[{label:"Bold",icon:(0,jsx_runtime.jsx)(Icons_Bold,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"bold")},value:"bold",active:isBold},{label:"Italic",icon:(0,jsx_runtime.jsx)(Icons_Italic,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"italic")},value:"italic",active:isItalic},{label:"Underline",icon:(0,jsx_runtime.jsx)(Icons_Underline,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"underline")},value:"underline",active:isUnderline},{label:"Strikethrough",icon:(0,jsx_runtime.jsx)(StrikeThrough,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"strikethrough")},value:"strikethrough",active:isStrikethrough},{label:"Subscript",icon:(0,jsx_runtime.jsx)(Icons_Subscript,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"subscript")},value:"subscript",active:isSubscript},{label:"Superscript",icon:(0,jsx_runtime.jsx)(Icons_Superscript,{}),onClick:()=>{editor.dispatchCommand(Lexical_prod.mB,"superscript")},value:"superscript",active:isSuperscript}]],alignmentActions=[{label:"Left Align",direction:"left",icon:(0,jsx_runtime.jsx)(align_left.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.fUS,"left")}},{label:"Center Align",direction:"center",icon:(0,jsx_runtime.jsx)(align_center.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.fUS,"center")}},{label:"Right Align",direction:"right",icon:(0,jsx_runtime.jsx)(align_right.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.fUS,"right")}},{label:"Justify Align",direction:"justify",icon:(0,jsx_runtime.jsx)(align_justify.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(Lexical_prod.fUS,"justify")}}],listActions=[{label:"Unordered List",value:"ul",icon:(0,jsx_runtime.jsx)(list.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(LexicalList_prod.q7,void 0)}},{label:"Ordered List",value:"ol",icon:(0,jsx_runtime.jsx)(list_ordered.A,{width:15,height:15}),onClick:()=>{editor.dispatchCommand(LexicalList_prod.x,void 0)}}],headingOptions=[{label:"Normal Text",value:"p",icon:(0,jsx_runtime.jsx)(TextIcon,{}),onClick:()=>onHeadingSelect("p")},{label:"Heading 1",value:"h1",icon:(0,jsx_runtime.jsx)(H1,{}),onClick:()=>onHeadingSelect("h1")},{label:"Heading 2",value:"h2",icon:(0,jsx_runtime.jsx)(H2,{}),onClick:()=>onHeadingSelect("h2")},{label:"Heading 3",value:"h3",icon:(0,jsx_runtime.jsx)(H3,{}),onClick:()=>onHeadingSelect("h3")},{label:"Heading 4",value:"h4",icon:(0,jsx_runtime.jsx)(H4,{}),onClick:()=>onHeadingSelect("h4")},...listActions],insertActions=[{label:"Insert Image",icon:(0,jsx_runtime.jsx)(image_up.A,{width:15,height:15}),onClick:()=>{setImageDialogOpen(!0)},disabled:!1}];return(0,jsx_runtime.jsx)("div",{className:"flex justify-between border border-[#222222] py-2 px-2 sticky top-0 bg-black z-50",children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 ",ref:toolbarRef,children:[toolbarActions.map(((group,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:group.map(((action,actionIndex)=>(0,jsx_runtime.jsx)("div",{role:"button","aria-disabled":action.disabled||!1,onClick:action.onClick,className:(0,cn.cn)("p-1 transition-all flex items-center justify-center rounded hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c]",action.active&&"bg-[#3c3c3c]"),"aria-label":action.label,children:(0,jsx_runtime.jsx)(tooltip.Bc,{children:(0,jsx_runtime.jsxs)(tooltip.m_,{children:[(0,jsx_runtime.jsx)(tooltip.k$,{className:"text-[#b5b5b5]",children:action.icon}),(0,jsx_runtime.jsx)(tooltip.ZI,{children:(0,jsx_runtime.jsx)("p",{children:action.label})})]})})},actionIndex)))}),(0,jsx_runtime.jsx)(Divider,{})]},`toolbar-option-${group.length}-${index}`))),(0,jsx_runtime.jsxs)(dropdown_menu.rI,{children:[(0,jsx_runtime.jsxs)(dropdown_menu.ty,{className:"flex items-center justify-center gap-2 px-2 py-1 rounded hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c] text-[#b5b5b5] text-xs",children:[null===(_alignmentActions_find=alignmentActions.find((el=>el.direction===alignment)))||void 0===_alignmentActions_find?void 0:_alignmentActions_find.icon,null===(_alignmentActions_find1=alignmentActions.find((el=>el.direction===alignment)))||void 0===_alignmentActions_find1?void 0:_alignmentActions_find1.label,(0,jsx_runtime.jsx)(chevron_down.A,{width:15,height:15})]}),(0,jsx_runtime.jsx)(dropdown_menu.SQ,{className:"bg-black hover:bg-black",children:alignmentActions.map(((action,index)=>(0,jsx_runtime.jsxs)(dropdown_menu._2,{onClick:action.onClick,className:"flex items-center gap-2 text-xs text-[#b5b5b5] hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c]",children:[(0,jsx_runtime.jsx)("span",{children:action.icon}),(0,jsx_runtime.jsx)("span",{children:action.label})]},`${action.label}-${index}`)))})]}),(0,jsx_runtime.jsxs)(dropdown_menu.rI,{children:[(0,jsx_runtime.jsxs)(dropdown_menu.ty,{className:"flex items-center justify-center gap-2 px-2 py-1 rounded hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c] text-[#b5b5b5] text-xs",children:[null===(_headingOptions_find=headingOptions.find((el=>el.value===blockType)))||void 0===_headingOptions_find?void 0:_headingOptions_find.icon,null===(_headingOptions_find1=headingOptions.find((el=>el.value===blockType)))||void 0===_headingOptions_find1?void 0:_headingOptions_find1.label,(0,jsx_runtime.jsx)(chevron_down.A,{width:15,height:15})]}),(0,jsx_runtime.jsx)(dropdown_menu.SQ,{className:"bg-black hover:bg-black",children:headingOptions.map(((option,index)=>(0,jsx_runtime.jsxs)(dropdown_menu._2,{onClick:option.onClick,className:"flex items-center gap-2 text-xs text-[#b5b5b5] hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c]",children:[(0,jsx_runtime.jsx)("span",{children:option.icon}),(0,jsx_runtime.jsx)("span",{children:option.label})]},`heading-option-${option.label}-${index}`)))})]}),(0,jsx_runtime.jsxs)(dropdown_menu.rI,{children:[(0,jsx_runtime.jsxs)(dropdown_menu.ty,{className:"flex items-center justify-center gap-2 px-2 py-1 rounded hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c] text-[#b5b5b5] text-xs",children:[(0,jsx_runtime.jsx)(plus.A,{width:15,height:15}),(0,jsx_runtime.jsx)(chevron_down.A,{width:15,height:15})]}),(0,jsx_runtime.jsx)(dropdown_menu.SQ,{className:"bg-black hover:bg-black",children:insertActions.map(((action,index)=>(0,jsx_runtime.jsxs)(dropdown_menu._2,{onClick:action.onClick,disabled:action.disabled,className:"flex items-center gap-2 text-xs text-[#b5b5b5] hover:bg-[#3c3c3c] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#3a3a3a] focus:ring-[#3c3c3c]",children:[(0,jsx_runtime.jsx)("span",{children:action.icon}),(0,jsx_runtime.jsx)("span",{children:action.label})]},index)))})]}),imageDialogOpen&&(0,jsx_runtime.jsx)(InsertInlineImageDialog,{activeEditor:editor,onClose:()=>{setImageDialogOpen(!1)},isOpen:imageDialogOpen})]})})}ToolbarPlugin.__docgenInfo={description:"",methods:[],displayName:"ToolbarPlugin"};var RichText_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const RichTextContent=({setValue,value,name,editable=!0})=>{const[editor]=(0,LexicalComposerContext_prod.DF)();return(0,react.useEffect)((()=>{editor.setEditable(editable)}),[editable]),(0,react.useEffect)((()=>{value&&editor.update((()=>{editor.setEditorState(editor.parseEditorState(value))}))}),[]),(0,jsx_runtime.jsx)("div",{className:"w-full",children:(0,jsx_runtime.jsxs)("div",{className:" ",children:[editable&&(0,jsx_runtime.jsx)(ToolbarPlugin,{}),(0,jsx_runtime.jsxs)("div",{className:"px-4 my-4  border-l  border-[#222222]",children:[(0,jsx_runtime.jsx)(LexicalRichTextPlugin_prod.$,{contentEditable:(0,jsx_runtime.jsx)(LexicalContentEditable_prod.a,{name,className:"focus:outline-none focus:ring-0 focus-visible:outline-none min-h-40"}),ErrorBoundary:LexicalErrorBoundary_prod.R}),editable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LexicalHistoryPlugin_prod.G,{}),(0,jsx_runtime.jsx)(LexicalAutoFocusPlugin_prod.x,{}),(0,jsx_runtime.jsx)(LexicalListPlugin_prod.Q,{}),(0,jsx_runtime.jsx)(LexicalOnChangePlugin_prod.D,{onChange:editorState=>{editorState.read((()=>{const json=editorState.toJSON();null==setValue||setValue((()=>json))}))}}),(0,jsx_runtime.jsx)(InlineImagePlugin,{})]})]})]})})},RichText=({setValue,value,name,editable=!0})=>{const editorConfig={namespace:"Lexical editor",nodes:[LexicalList_prod.v5,LexicalList_prod.YW,LexicalRichText_prod.jL,UploadNode],onError(error){throw RichText_console.error("Lexical error:",error),error},theme:{code:"editor-code",heading:{h1:"text-4xl text-primary",h2:"text-3xl",h3:"text-2xl",h4:"text-lg",h5:"text-sm"},image:"editor-image",link:"editor-link",list:{listitem:"editor-listitem",nested:{listitem:"editor-nested-listitem"},ol:"list-decimal",ul:"list-disc"},ltr:"ltr",paragraph:"editor-paragraph",placeholder:"editor-placeholder",quote:"editor-quote",rtl:"rtl",text:{bold:"editor-text-bold font-bold",code:"editor-text-code",hashtag:"editor-text-hashtag",italic:"editor-text-italic italic",overflowed:"editor-text-overflowed",strikethrough:"editor-text-strikethrough line-through",underline:"editor-text-underline underline",underlineStrikethrough:"underline line-through"}}};return(0,jsx_runtime.jsx)(LexicalComposer_prod.n,{initialConfig:editorConfig,children:(0,jsx_runtime.jsx)(RichTextContent,{value,setValue,name,editable})})},Foundary_RichText=RichText;RichText.__docgenInfo={description:"",methods:[],displayName:"RichText",props:{value:{required:!1,tsType:{name:"string"},description:""},setValue:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"any"}],raw:"SetStateAction<any>"}],raw:"Dispatch<SetStateAction<any>>"},description:""},name:{required:!0,tsType:{name:"string"},description:""},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./src/components/Foundary/document-edit.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>DocumentEdit});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),motion_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.12_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file-text.js"),__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file.js"),__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/type.js"),__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/info.js")),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-down.js"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-right.js"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/x.js"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/loader-circle.js"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/save.js"),_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/plus.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ui/button.tsx"),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/components/ui/textarea.tsx"),_components_ui_input__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_select__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/components/ui/select.tsx"),_components_AdvancedComponents_EditableField__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/AdvancedComponents/EditableField.tsx"),_RichText__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/components/Foundary/RichText/index.tsx");function DocumentEdit({document,onSave,mode="edit",onCancel,availableDocuments=[],knowledgeContexts=[]}){const[editedDocument,setEditedDocument]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({...document,updatedAt:new Date}),[isMetadataExpanded,setIsMetadataExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[richTextContent,setRichTextContent]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(editedDocument.richTextContent),[isAutoSaving,setIsAutoSaving]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),lastSavedHashRef=((0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)("")),autoSaveDisplayTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),debounceRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),stableStringify=obj=>{const seen=new WeakSet,stringify=val=>val&&"object"==typeof val?seen.has(val)?null:(seen.add(val),Array.isArray(val)?val.map(stringify):Object.keys(val).sort().reduce(((acc,k)=>(acc[k]=stringify(val[k]),acc)),{})):val;return JSON.stringify(stringify(obj))},normalizeText=s=>s?s.replace(/\s+/g," ").trim():"",canonicalizeMetadata=meta=>{if(!meta)return{};const out={};return Object.keys(meta).sort().forEach((k=>{var _meta_k;out[k]=String(null!==(_meta_k=meta[k])&&void 0!==_meta_k?_meta_k:"").trim()})),out},canonicalContent=()=>"richText"===editedDocument.format?stableStringify(richTextContent):normalizeText(editedDocument.content),computeSnapshotHash=()=>{const snapshot={title:normalizeText(editedDocument.title),description:normalizeText(editedDocument.description),format:editedDocument.format,metadata:canonicalizeMetadata(editedDocument.metadata),content:canonicalContent()},s=stableStringify(snapshot);let hash=5381;for(let i=0;i<s.length;i++)hash=33*hash^s.charCodeAt(i);return(hash>>>0).toString(16)},hashToContentLenRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map),canonicalContentFromHash=hash=>{const len=hashToContentLenRef.current.get(hash);return null==len?null:"x".repeat(len)};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>(debounceRef.current&&clearTimeout(debounceRef.current),debounceRef.current=setTimeout((()=>{const nextHash=computeSnapshotHash();if(((prevHash,nextHash)=>{if(prevHash===nextHash)return!1;if("richText"!==editedDocument.format){const oldC=canonicalContentFromHash(prevHash),newC=canonicalContent();if(null==oldC)return!0;const oldLen=oldC.length,newLen=newC.length,absDelta=Math.abs(newLen-oldLen),pctDelta=0===oldLen?1:absDelta/oldLen;return!(normalizeText(oldC)===normalizeText(newC)&&absDelta<3)&&(absDelta>=10||pctDelta>=.02)}return!0})(lastSavedHashRef.current,nextHash)&&(setIsAutoSaving(!0),onSave({...editedDocument,richTextContent},"autosave"),lastSavedHashRef.current=nextHash,"richText"!==editedDocument.format)){const c=canonicalContent();hashToContentLenRef.current.set(nextHash,c.length)}}),800),()=>{debounceRef.current&&clearTimeout(debounceRef.current)})),[editedDocument.title,editedDocument.description,editedDocument.format,editedDocument.content,editedDocument.metadata,richTextContent]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const handleBeforeUnload=()=>{const nextHash=computeSnapshotHash();nextHash!==lastSavedHashRef.current&&(onSave({...editedDocument,richTextContent},"autosave"),lastSavedHashRef.current=nextHash)};return window.addEventListener("pagehide",handleBeforeUnload),window.addEventListener("beforeunload",handleBeforeUnload),()=>{window.removeEventListener("pagehide",handleBeforeUnload),window.removeEventListener("beforeunload",handleBeforeUnload)}}),[editedDocument,richTextContent]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>(isAutoSaving&&(autoSaveDisplayTimerRef.current=setTimeout((()=>{setIsAutoSaving(!1)}),2e3)),()=>{autoSaveDisplayTimerRef.current&&clearTimeout(autoSaveDisplayTimerRef.current)})),[isAutoSaving]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setEditedDocument(document)}),[document]);const suggestedKeys=(()=>{const keysFromContexts=new Set,keysFromDocuments=new Set;return knowledgeContexts.forEach((context=>{context.menuConfig.groupBy.forEach((key=>keysFromContexts.add(key)))})),availableDocuments.forEach((doc=>{doc.metadata&&Object.keys(doc.metadata).forEach((key=>keysFromDocuments.add(key)))})),{contextKeys:Array.from(keysFromContexts).sort(),documentKeys:Array.from(keysFromDocuments).sort(),allKeys:Array.from(new Set([...keysFromContexts,...keysFromDocuments])).sort()}})(),handleMetadataChange=(key,value)=>{setEditedDocument((prev=>({...prev,metadata:{...prev.metadata,[key]:value}})))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_5__.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"h-screen flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border-b border-border bg-card p-8 pb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start gap-4 mb-0 leading-tight",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 min-w-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_AdvancedComponents_EditableField__WEBPACK_IMPORTED_MODULE_6__.B,{fieldName:"title",value:editedDocument.title,label:"",onSave:(fieldName,value)=>setEditedDocument((prev=>({...prev,title:value}))),className:"[&>div:last-child]:text-2xl [&>div:last-child]:font-bold [&>div:last-child]:leading-tight [&>div:last-child]:text-foreground [&>div:last-child]:p-0 [&>div:last-child]:border-0 [&>div:last-child]:hover:bg-muted/30 [&>div:last-child]:min-h-0"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${(format=>{switch(format){case"markdown":return"bg-primary/10 text-primary border-primary/20";case"mdx":return"bg-secondary/10 text-secondary border-secondary/20";case"richText":return"bg-success/10 text-success border-success/20";case"text":return"bg-muted/50 text-muted-foreground border-muted-foreground/20";default:return"bg-muted text-muted-foreground border-border"}})(editedDocument.format)} flex-shrink-0 mt-1`,children:editedDocument.format.toUpperCase()})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_AdvancedComponents_EditableField__WEBPACK_IMPORTED_MODULE_6__.B,{fieldName:"description",value:editedDocument.description||"Click to add description...",label:"",multiline:!0,onSave:(fieldName,value)=>setEditedDocument((prev=>({...prev,description:value}))),className:"[&>div:last-child]:text-muted-foreground [&>div:last-child]:text-lg [&>div:last-child]:leading-relaxed [&>div:last-child]:p-0 [&>div:last-child]:border-0 [&>div:last-child]:hover:bg-muted/30 [&>div:last-child]:min-h-0"})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.$,{variant:"ghost",size:"sm",onClick:()=>setIsMetadataExpanded(!isMetadataExpanded),className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__.A,{className:"h-4 w-4"}),"Metadata",editedDocument.metadata&&Object.keys(editedDocument.metadata).length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"inline-flex items-center justify-center w-5 h-5 text-xs font-medium bg-primary/10 text-primary rounded-full",children:Object.keys(editedDocument.metadata).length}),isMetadataExpanded?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__.A,{className:"h-4 w-4"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__.A,{className:"h-4 w-4"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.$,{variant:"outline",size:"sm",onClick:onCancel,className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__.A,{className:"h-4 w-4"}),"Close"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.$,{size:"sm",onClick:()=>{onSave({...editedDocument,richTextContent},"autosave")},className:"gap-2",disabled:isAutoSaving,children:[isAutoSaving?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__.A,{className:"h-4 w-4 animate-spin"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__.A,{className:"h-4 w-4"}),isAutoSaving?"Auto-saving...":"Save"]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_5__.P.div,{initial:!1,animate:{height:isMetadataExpanded?"auto":0,opacity:isMetadataExpanded?1:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden h-full max-h-full",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"pt-4 border-t border-border mt-4 h-screen max-h-full flex",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__.A,{className:"h-4 w-4"}),"Document Metadata"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{handleMetadataChange("","")},className:"gap-1 h-8",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.A,{className:"h-3 w-3"}),"Add Field"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-muted rounded-lg p-4 border border-border",children:editedDocument.metadata&&Object.keys(editedDocument.metadata).length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-2",children:Object.entries(editedDocument.metadata).map((([key,value],index)=>{const suggestedValues=(key=>{const values=new Set;return availableDocuments.forEach((doc=>{var _doc_metadata;(null===(_doc_metadata=doc.metadata)||void 0===_doc_metadata?void 0:_doc_metadata[key])&&values.add(String(doc.metadata[key]))})),Array.from(values).sort()})(key);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_15__.p,{value:key,onChange:e=>{var _editedDocument_metadata;const newKey=e.target.value||"",oldValue=null===(_editedDocument_metadata=editedDocument.metadata)||void 0===_editedDocument_metadata?void 0:_editedDocument_metadata[key];setEditedDocument((prev=>{const newMetadata={...prev.metadata};return delete newMetadata[key],newKey&&(newMetadata[newKey]=oldValue||""),{...prev,metadata:newMetadata}}))},placeholder:"Key",className:"w-32 h-8 text-sm",list:`metadata-keys-${key}`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("datalist",{id:`metadata-keys-${key}`,children:suggestedKeys.allKeys.map((suggestedKey=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:suggestedKey},suggestedKey)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-sm",children:"="}),suggestedValues.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.l6,{value:String(value||""),onValueChange:newValue=>((key,value)=>{handleMetadataChange(key,"__custom__"===value?"":value)})(key,newValue),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.bq,{className:"flex-1 h-8 text-sm",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.yv,{placeholder:"Value"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.gC,{children:[suggestedValues.map((suggestedValue=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.eb,{value:suggestedValue,children:suggestedValue},suggestedValue))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_16__.eb,{value:"__custom__",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground text-xs",children:"Custom..."})})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_15__.p,{value:String(value||""),onChange:e=>handleMetadataChange(key,e.target.value),placeholder:"Value",className:"flex-1 h-8 text-sm"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_7__.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(key=>{setEditedDocument((prev=>{const newMetadata={...prev.metadata};return delete newMetadata[key],{...prev,metadata:newMetadata}}))})(key),className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_File_FileText_Info_Loader2_Plus_Save_Type_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__.A,{className:"h-3 w-3"})})]},`metadata-key-${index}`)}))}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center py-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"No metadata fields"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-xs text-muted-foreground",children:'Click "Add Field" to create metadata'})]})})]})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-8 pt-0 h-full max-h-full overflow-auto",children:"richText"===editedDocument.format?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_RichText__WEBPACK_IMPORTED_MODULE_17__.A,{setValue:setRichTextContent,value:richTextContent,name:"richTextContent"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_18__.T,{value:editedDocument.content||"",onChange:e=>setEditedDocument((prev=>({...prev,content:e.target.value}))),placeholder:"Document content...",className:"min-h-[400px] font-mono text-sm",style:{resize:"vertical"}})})})]})}DocumentEdit.__docgenInfo={description:"",methods:[],displayName:"DocumentEdit",props:{document:{required:!0,tsType:{name:"KnowledgeDocument"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument, mode: 'save' | 'autosave') => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"},{type:{name:"union",raw:"'save' | 'autosave'",elements:[{name:"literal",value:"'save'"},{name:"literal",value:"'autosave'"}]},name:"mode"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:"'create' | 'edit'",elements:[{name:"literal",value:"'create'"},{name:"literal",value:"'edit'"}]},description:"",defaultValue:{value:"'edit'",computed:!1}},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},availableDocuments:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeDocument"}],raw:"KnowledgeDocument[]"},description:"",defaultValue:{value:"[]",computed:!1}},knowledgeContexts:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeContext"}],raw:"KnowledgeContext[]"},description:"",defaultValue:{value:"[]",computed:!1}}}}},"./src/components/ui/label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Label});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-label@2.1.1_@types+react-dom@19.0.2_@types+react@19.0.2__@types+react@1_321aba799e0023b90b4c7c3e34cc0ef4/node_modules/@radix-ui/react-label/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/class-variance-authority@0.7.1/node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/cn.ts");const labelVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_2__.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__.b,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(labelVariants(),className),...props})));Label.displayName=_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_3__.b.displayName,Label.__docgenInfo={description:"",methods:[]}},"./src/components/ui/select.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{bq:()=>SelectTrigger,eb:()=>SelectItem,gC:()=>SelectContent,l6:()=>Select,yv:()=>SelectValue});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/utils/cn.ts"),_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-select@2.1.4_@types+react-dom@19.0.2_@types+react@19.0.2__@types+react@_b4d391f39ecf42f7ca18c67900b05119/node_modules/@radix-ui/react-select/dist/index.mjs"),_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-down.js"),_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-up.js"),_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/check.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js");const Select=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.bL,SelectValue=(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.YJ,_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.WT),SelectTrigger=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({children,className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.l9,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex h-10 w-full items-center justify-between rounded border border-input bg-background px-3 py-2 text-inherit ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",className),ref,...props,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.In,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{className:"h-4 w-4 opacity-50"})})]})));SelectTrigger.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.l9.displayName;const SelectScrollUpButton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.PP,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex cursor-default items-center justify-center py-1",className),ref,...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-4 w-4"})})));SelectScrollUpButton.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.PP.displayName;const SelectScrollDownButton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wn,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex cursor-default items-center justify-center py-1",className),ref,...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{className:"h-4 w-4"})})));SelectScrollDownButton.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wn.displayName;const SelectContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({children,className,position="popper",...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.ZL,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.UC,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded border bg-card text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===position&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",className),position,ref,...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectScrollUpButton,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.LM,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("p-1","popper"===position&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectScrollDownButton,{})]})})));SelectContent.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.UC.displayName;const SelectLabel=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JU,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",className),ref,...props})));SelectLabel.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JU.displayName;const SelectItem=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({children,className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.q7,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("relative flex w-full cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",className),ref,...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.VF,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_ChevronDown_ChevronUp_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"h-4 w-4"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.p4,{children})]})));SelectItem.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.q7.displayName;const SelectSeparator=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wv,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("-mx-1 my-1 h-px bg-muted",className),ref,...props})));SelectSeparator.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wv.displayName,SelectContent.__docgenInfo={description:"",methods:[],props:{position:{defaultValue:{value:"'popper'",computed:!1},required:!1}}},SelectItem.__docgenInfo={description:"",methods:[]},SelectLabel.__docgenInfo={description:"",methods:[]},SelectScrollDownButton.__docgenInfo={description:"",methods:[]},SelectScrollUpButton.__docgenInfo={description:"",methods:[]},SelectSeparator.__docgenInfo={description:"",methods:[]},SelectTrigger.__docgenInfo={description:"",methods:[]}},"./src/components/ui/textarea.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>Textarea});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utils/cn.ts");const Textarea=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js").forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("textarea",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex min-h-[80px] w-full rounded border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",className),ref,...props})));Textarea.displayName="Textarea",Textarea.__docgenInfo={description:"",methods:[],displayName:"Textarea"}}}]);