"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[40013],{"./src/components/Foundary/document-preview.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>DocumentPreview});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),motion_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.12_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file-text.js"),_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file.js"),_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/type.js"),_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/pen-line.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/ui/button.tsx"),_document_edit__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Foundary/document-edit.tsx"),react_markdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react-markdown@10.1.0_@types+react@19.0.2_react@19.0.0/node_modules/react-markdown/lib/index.js"),remark_gfm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/remark-gfm@4.0.1/node_modules/remark-gfm/lib/index.js"),_RichText__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Foundary/RichText/index.tsx");const defaultMarkdownRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_markdown__WEBPACK_IMPORTED_MODULE_2__.oz,{remarkPlugins:[remark_gfm__WEBPACK_IMPORTED_MODULE_3__.A],components:{h1:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold",children}),h2:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-xl font-bold",children}),h3:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-bold",children}),h4:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-base font-bold",children}),ol:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ol",{className:"list-decimal",children}),ul:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"list-disc",children}),li:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{className:"ml-4",children}),p:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-4",children}),a:({children,href})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href,className:"text-blue-500",children}),img:({src,alt})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src,alt,className:"mb-4"}),blockquote:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("blockquote",{className:"border-l-4 border-gray-300 pl-4 mb-4",children})},children:content}),defaultTextRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"whitespace-pre-wrap font-mono text-sm leading-relaxed",children:content}),defaultRichTextRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:content&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_RichText__WEBPACK_IMPORTED_MODULE_4__.A,{value:JSON.stringify(content),editable:!1,name:"richTextContent"})}),defaultMDXRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong",{children:"MDX Renderer:"})," This is a placeholder. Integrate with @mdx-js/react for full MDX rendering."]})}),defaultMarkdownRenderer(content)]});function DocumentPreview({document:initialDocument,onDocumentUpdate,editable=!0,mode="view",renderers,availableDocuments=[],knowledgeContexts=[]}){var _document_tags;const[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[document,setDocument]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialDocument);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setDocument(initialDocument)}),[initialDocument]);const handleSave=updatedDocument=>{setIsEditing(!1),null==onDocumentUpdate||onDocumentUpdate(updatedDocument),setDocument(updatedDocument)},handleCancel=()=>{setIsEditing(!1)};return isEditing||"create"===mode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_document_edit__WEBPACK_IMPORTED_MODULE_8__.g,{mode:"create"===mode?"create":"edit",document,onSave:handleSave,onCancel:handleCancel,availableDocuments,knowledgeContexts}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_9__.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"h-full flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border-b border-border bg-card p-8",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0 p-3 rounded-xl bg-muted border border-border",children:(format=>{switch(format){case"markdown":case"mdx":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-6 w-6 text-primary"});case"richText":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"h-6 w-6 text-success"});case"text":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_7__.A,{className:"h-6 w-6 text-muted-foreground"});default:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"h-6 w-6 text-muted-foreground"})}})(document.format)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2 leading-tight",children:document.title}),document.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-lg leading-relaxed mb-4",children:document.description})]})]}),editable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_10__.$,{variant:"outline",size:"sm",onClick:()=>setIsEditing(!0),className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_11__.A,{className:"h-4 w-4"}),"Edit"]})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${(format=>{switch(format){case"markdown":return"bg-primary/10 text-primary border-primary/20";case"mdx":return"bg-secondary/10 text-secondary border-secondary/20";case"richText":return"bg-success/10 text-success border-success/20";case"text":return"bg-muted/50 text-muted-foreground border-muted-foreground/20";default:return"bg-muted text-muted-foreground border-border"}})(document.format)}`,children:document.format.toUpperCase()}),null===(_document_tags=document.tags)||void 0===_document_tags?void 0:_document_tags.map((tag=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-muted text-muted-foreground border border-border",children:["#",tag]},tag)))]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 overflow-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-8",children:[document.metadata&&Object.keys(document.metadata).length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Metadata"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-muted rounded-lg p-3 border border-border",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-1 text-xs",children:Object.entries(document.metadata).map((([key,value])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-muted-foreground font-medium",children:[key.replace(/([A-Z])/g," $1").trim(),":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-foreground truncate",children:String(value)})]},key)))})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-4",children:document.content||document.richTextContent?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-card border border-border rounded-xl p-6 overflow-hidden",children:((content,format)=>{const defaultRenderers={markdown:defaultMarkdownRenderer,mdx:defaultMDXRenderer,text:defaultTextRenderer},renderer=(null==renderers?void 0:renderers[format])||defaultRenderers[format];return"richText"===format&&"object"==typeof content?defaultRichTextRenderer(content):renderer&&"string"==typeof content?renderer(content):"string"==typeof content?defaultTextRenderer(content):void 0})("richText"===document.format?document.richTextContent:document.content,document.format)})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center py-12 bg-muted rounded-xl border-2 border-dashed border-border",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-background flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Edit3_File_FileText_Type_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-foreground font-medium mb-1",children:"No content available"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-sm",children:"This document doesn't have preview content"})]})})]})})]})}DocumentPreview.__docgenInfo={description:"",methods:[],displayName:"DocumentPreview",props:{document:{required:!0,tsType:{name:"KnowledgeDocument"},description:""},onDocumentUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:""},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},mode:{required:!1,tsType:{name:"union",raw:"'create' | 'view'",elements:[{name:"literal",value:"'create'"},{name:"literal",value:"'view'"}]},description:"",defaultValue:{value:"'view'",computed:!1}},renderers:{required:!1,tsType:{name:"DocumentRenderers"},description:""},availableDocuments:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeDocument"}],raw:"KnowledgeDocument[]"},description:"",defaultValue:{value:"[]",computed:!1}},knowledgeContexts:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeContext"}],raw:"KnowledgeContext[]"},description:"",defaultValue:{value:"[]",computed:!1}}}}},"./src/components/Foundary/knowledge-browser.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>KnowledgeBrowser});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),motion_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.12_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file-text.js"),_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file.js"),_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-right.js"),_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/search.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/ui/scroll-area.tsx"),_document_preview__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Foundary/document-preview.tsx");function MenuItem({label,documents,children,level,onDocumentClick,selectedDocumentId,showDocumentCount=!0}){const[isExpanded,setIsExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0===level),hasChildren=children&&Object.keys(children).length>0,totalDocuments=documents.length+(children?Object.values(children).reduce(((acc,child)=>acc+child.documents.length),0):0),formatDocumentIcon=format=>{switch(format){case"markdown":case"mdx":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_2__.A,{className:"h-3.5 w-3.5 text-muted-foreground"});default:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_3__.A,{className:"h-3.5 w-3.5 text-muted-foreground"})}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(hasChildren||documents.length>0)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{className:"group flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-200 "+(isExpanded?"bg-card shadow-sm border border-border":"hover:bg-muted/50 hover:shadow-sm"),style:{marginLeft:20*level+"px"},onClick:()=>setIsExpanded(!isExpanded),whileHover:{scale:1.01},whileTap:{scale:.99},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:`w-1 h-6 rounded-full ${(level=>{const colors=["bg-primary","bg-secondary","bg-accent","bg-chart-1"];return colors[level%colors.length]})(level)}`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{animate:{rotate:isExpanded?90:0},transition:{duration:.2},className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-center gap-2 min-w-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-foreground truncate",children:label})}),showDocumentCount&&totalDocuments>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0 ml-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 text-xs font-medium bg-muted text-muted-foreground rounded-full",children:totalDocuments})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{initial:!1,animate:{height:isExpanded?"auto":0,opacity:isExpanded?1:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"pt-2 space-y-1",children:[documents.map(((doc,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*index,duration:.2},className:"group flex items-center gap-3 p-2.5 mx-2 rounded-lg cursor-pointer transition-all duration-150 "+(selectedDocumentId===doc.id?"bg-primary/10 border-l-2 border-primary shadow-sm":"hover:bg-muted/50 hover:translate-x-1"),style:{marginLeft:20*level+20+"px"},onClick:()=>null==onDocumentClick?void 0:onDocumentClick(doc),whileHover:{scale:1.01},whileTap:{scale:.99},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:formatDocumentIcon(doc.format)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm truncate transition-colors "+(selectedDocumentId===doc.id?"text-primary font-medium":"text-foreground group-hover:text-foreground"),children:doc.title}),doc.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:doc.description})]}),doc.tags&&doc.tags.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-shrink-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-muted text-muted-foreground group-hover:bg-muted/80 transition-colors",children:doc.tags[0]})})]},doc.id))),children&&Object.entries(children).map((([childLabel,childData])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuItem,{label:childLabel,documents:childData.documents,children:childData.children,level:level+1,onDocumentClick,selectedDocumentId,showDocumentCount},childLabel)))]})})]})}function KnowledgeBrowser({documents:initialDocuments,menuConfig,onDocumentClick,onDocumentShare,onDocumentUpdate,selectedDocumentId,className,editable=!0}){const[searchQuery,setSearchQuery]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[selectedDocument,setSelectedDocument]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[documents,setDocuments]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialDocuments);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setDocuments(initialDocuments)}),[initialDocuments]);const filteredDocuments=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>searchQuery?documents.filter((doc=>{var _doc_description,_doc_tags;return doc.title.toLowerCase().includes(searchQuery.toLowerCase())||(null===(_doc_description=doc.description)||void 0===_doc_description?void 0:_doc_description.toLowerCase().includes(searchQuery.toLowerCase()))||(null===(_doc_tags=doc.tags)||void 0===_doc_tags?void 0:_doc_tags.some((tag=>tag.toLowerCase().includes(searchQuery.toLowerCase()))))||Object.values(doc.metadata||{}).some((value=>String(value).toLowerCase().includes(searchQuery.toLowerCase())))})):documents),[documents,searchQuery]),hierarchy=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>{const buildHierarchy=(docs,groupKeys)=>{if(0===groupKeys.length)return{};const[currentKey,...remainingKeys]=groupKeys;return docs.reduce(((acc,doc)=>{var _doc_metadata;const value=(null===(_doc_metadata=doc.metadata)||void 0===_doc_metadata?void 0:_doc_metadata[currentKey])||"Uncategorized",key=String(value);if(acc[key]||(acc[key]={documents:[],children:{}}),0===remainingKeys.length)acc[key].documents.push(doc);else{const childHierarchy=buildHierarchy([doc],remainingKeys),childKey=Object.keys(childHierarchy)[0];childKey&&(acc[key].children||(acc[key].children={}),acc[key].children[childKey]?acc[key].children[childKey].documents.push(...childHierarchy[childKey].documents):acc[key].children[childKey]=childHierarchy[childKey])}return acc}),{})};return buildHierarchy(filteredDocuments,menuConfig.groupBy)}),[filteredDocuments,menuConfig.groupBy]),handleDocumentClick=document=>{setSelectedDocument(document),null==onDocumentClick||onDocumentClick(document)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`flex h-full ${className||""}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-1/3 border-r border-border bg-muted/20",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-6 border-b border-border",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_7__.p,{placeholder:"Search knowledge base...",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:"pl-10 bg-background/80 border-border focus:border-primary/50 focus:ring-primary/20 rounded-xl h-11 text-sm placeholder:text-muted-foreground"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_8__.F,{className:"h-[calc(100%-100px)]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-4 space-y-3",children:0===menuConfig.groupBy.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuItem,{label:"Document",documents:filteredDocuments,level:0,onDocumentClick:handleDocumentClick,selectedDocumentId,showDocumentCount:menuConfig.showDocumentCount},"Document")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[Object.entries(hierarchy).map((([label,data])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuItem,{label,documents:data.documents,children:data.children,level:0,onDocumentClick:handleDocumentClick,selectedDocumentId,showDocumentCount:menuConfig.showDocumentCount},label))),0===Object.keys(hierarchy).length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-muted-foreground py-12",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_2__.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm font-medium",children:"No documents found"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-xs mt-1",children:"Try adjusting your search terms"})]})]})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 bg-background",children:selectedDocument?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_document_preview__WEBPACK_IMPORTED_MODULE_9__.m,{document:selectedDocument,onDocumentUpdate,editable}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"h-full flex items-center justify-center text-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_4__.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"max-w-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronRight_File_FileText_Search_lucide_react__WEBPACK_IMPORTED_MODULE_2__.A,{className:"h-10 w-10 text-primary"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Select a document"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:"Choose any document from the knowledge base to view its content and details"})]})})})]})}KnowledgeBrowser.__docgenInfo={description:"",methods:[],displayName:"KnowledgeBrowser",props:{documents:{required:!0,tsType:{name:"Array",elements:[{name:"KnowledgeDocument"}],raw:"KnowledgeDocument[]"},description:""},menuConfig:{required:!0,tsType:{name:"KnowledgeMenuConfig"},description:""},onDocumentClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:""},onDocumentShare:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:""},onDocumentUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:""},selectedDocumentId:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}}}]);