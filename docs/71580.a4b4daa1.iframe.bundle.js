"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[71580],{"./src/components/Foundary/document-preview.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>DocumentPreview});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),motion_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.12_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file-text.js"),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/file.js"),__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/type.js"),__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/loader-circle.js")),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/info.js"),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-down.js"),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/chevron-right.js"),_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/pen-line.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/ui/button.tsx"),_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/ui/dialog.tsx"),_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/.pnpm/@radix-ui+react-dialog@1.1.4_@types+react-dom@19.0.2_@types+react@19.0.2__@types+react@_5b818d6da082a87ccafa69e5e1eacf4a/node_modules/@radix-ui/react-dialog/dist/index.mjs"),_document_edit__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/Foundary/document-edit.tsx"),_lib_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/utils/cn.ts"),react_markdown__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/react-markdown@10.1.0_@types+react@19.0.2_react@19.0.0/node_modules/react-markdown/lib/index.js"),remark_gfm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/remark-gfm@4.0.1/node_modules/remark-gfm/lib/index.js"),_RichText__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Foundary/RichText/index.tsx");const defaultMarkdownRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_markdown__WEBPACK_IMPORTED_MODULE_2__.oz,{remarkPlugins:[remark_gfm__WEBPACK_IMPORTED_MODULE_3__.A],components:{h1:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold",children}),h2:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-xl font-bold",children}),h3:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-bold",children}),h4:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-base font-bold",children}),ol:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ol",{className:"list-decimal",children}),ul:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"list-disc",children}),li:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{className:"ml-4",children}),p:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-4",children}),a:({children,href})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href,className:"text-blue-500",children}),img:({src,alt})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src,alt,className:"mb-4"}),blockquote:({children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("blockquote",{className:"border-l-4 border-gray-300 pl-4 mb-4",children})},children:content}),defaultTextRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"whitespace-pre-wrap font-mono text-sm leading-relaxed",children:content}),defaultRichTextRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:content&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_RichText__WEBPACK_IMPORTED_MODULE_4__.A,{value:JSON.stringify(content),editable:!1,name:"richTextContent"},JSON.stringify(content))}),defaultMDXRenderer=content=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong",{children:"MDX Renderer:"})," This is a placeholder. Integrate with @mdx-js/react for full MDX rendering."]})}),defaultMarkdownRenderer(content)]});function DocumentPreview({document:initialDocument,onDocumentUpdate,editable=!0,mode="view",renderers,availableDocuments=[],knowledgeContexts=[]}){const[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isMetadataExpanded,setIsMetadataExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[document,setDocument]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialDocument),[isSaving,setIsSaving]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),rollbackRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),contentForKey="richText"===document.format?document.richTextContent:document.content,contentKey=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>`${document.format}:${JSON.stringify(contentForKey)}`),[document.format,contentForKey]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setDocument(initialDocument)}),[initialDocument]);const handleCancel=()=>{setIsEditing(!1)},isDialogOpen=isEditing||"create"===mode;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.lG,{open:isDialogOpen,onOpenChange:open=>!open&&handleCancel(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.ZJ,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_8__.LC,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_9__.UC,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_10__.cn)("fixed inset-0 z-50 bg-background p-0 m-0 border-0","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"),children:[isSaving&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_11__.A,{className:"h-8 w-8 animate-spin text-primary"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_document_edit__WEBPACK_IMPORTED_MODULE_12__.g,{mode:"create"===mode?"create":"edit",document,onSave:async(updatedDocument,mode="save")=>{"save"===mode&&setIsSaving(!0),rollbackRef.current=document,(0,react__WEBPACK_IMPORTED_MODULE_1__.startTransition)((()=>{setDocument({...updatedDocument,richTextContent:updatedDocument.richTextContent?structuredClone(updatedDocument.richTextContent):void 0})}));try{const ok=await(null==onDocumentUpdate?void 0:onDocumentUpdate(updatedDocument));if("save"===mode&&setIsSaving(!1),!ok)throw new Error("save failed")}catch(e){rollbackRef.current&&(0,react__WEBPACK_IMPORTED_MODULE_1__.startTransition)((()=>setDocument(rollbackRef.current)))}},onCancel:handleCancel,availableDocuments,knowledgeContexts})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(motion_react__WEBPACK_IMPORTED_MODULE_13__.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"h-full flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border-b border-border bg-card p-8 pb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h1",{className:"text-2xl font-bold text-foreground mb-2 leading-tight",children:[document.title,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:`inline-flex ml-4 items-center px-3 py-1 rounded-full text-sm font-medium border ${(format=>{switch(format){case"markdown":return"bg-primary/10 text-primary border-primary/20";case"mdx":return"bg-secondary/10 text-secondary border-secondary/20";case"richText":return"bg-success/10 text-success border-success/20";case"text":return"bg-muted/50 text-muted-foreground border-muted-foreground/20";default:return"bg-muted text-muted-foreground border-border"}})(document.format)}`,children:document.format.toUpperCase()})]}),document.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-lg leading-relaxed",children:document.description})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"items-center gap-2 flex-shrink-0 hidden lg:flex",children:[document.metadata&&Object.keys(document.metadata).length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_14__.$,{variant:"ghost",size:"sm",onClick:()=>setIsMetadataExpanded(!isMetadataExpanded),className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_15__.A,{className:"h-4 w-4"}),"Metadata",isMetadataExpanded?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_16__.A,{className:"h-4 w-4"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_17__.A,{className:"h-4 w-4"})]}),editable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_14__.$,{variant:"outline",size:"sm",onClick:()=>setIsEditing(!0),className:"gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_18__.A,{className:"h-4 w-4"}),"Edit"]})]})]}),document.metadata&&Object.keys(document.metadata).length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_13__.P.div,{initial:!1,animate:{height:isMetadataExpanded?"auto":0,opacity:isMetadataExpanded?1:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"pt-4 border-t border-border mt-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_15__.A,{className:"h-4 w-4"}),"Document Metadata"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-muted rounded-lg p-4 border border-border",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-2 text-sm",children:Object.entries(document.metadata).map((([key,value])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-muted-foreground font-medium text-xs uppercase tracking-wide",children:key.replace(/([A-Z])/g," $1").trim()}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-foreground font-medium",children:String(value)})]},key)))})})]})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 ",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"py-4 h-full",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-4",children:document.content||document.richTextContent?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-background px-8 overflow-hidden h-full flex-1",children:((content,format)=>{const defaultRenderers={markdown:defaultMarkdownRenderer,mdx:defaultMDXRenderer,text:defaultTextRenderer},renderer=(null==renderers?void 0:renderers[format])||defaultRenderers[format];return"richText"===format&&"object"==typeof content?defaultRichTextRenderer(content):renderer&&"string"==typeof content?renderer(content):"string"==typeof content?defaultTextRenderer(content):void 0})("richText"===document.format?document.richTextContent:document.content,document.format)})},contentKey):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center p-12 bg-muted rounded-xl border-2 border-dashed border-border",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-background flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDown_ChevronRight_Edit3_File_FileText_Info_Loader2_Type_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-foreground font-medium mb-1",children:"No content available"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-muted-foreground text-sm",children:"This document doesn't have preview content"})]})})})})]})]})}DocumentPreview.__docgenInfo={description:"",methods:[],displayName:"DocumentPreview",props:{document:{required:!0,tsType:{name:"KnowledgeDocument"},description:""},onDocumentUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => Promise<boolean>",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"Promise",elements:[{name:"boolean"}],raw:"Promise<boolean>"}}},description:""},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},mode:{required:!1,tsType:{name:"union",raw:"'create' | 'view'",elements:[{name:"literal",value:"'create'"},{name:"literal",value:"'view'"}]},description:"",defaultValue:{value:"'view'",computed:!1}},renderers:{required:!1,tsType:{name:"DocumentRenderers"},description:""},availableDocuments:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeDocument"}],raw:"KnowledgeDocument[]"},description:"",defaultValue:{value:"[]",computed:!1}},knowledgeContexts:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeContext"}],raw:"KnowledgeContext[]"},description:"",defaultValue:{value:"[]",computed:!1}}}}}}]);