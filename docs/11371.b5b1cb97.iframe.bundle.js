"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[11371],{"./src/components/Foundary/Views/KnowledgeView.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>KnowledgeView});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_@opentelemetry+api@1.9.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),DashboardHero=__webpack_require__("./src/components/Heros/DashboardHero/DashboardHero.tsx"),knowledge_browser=__webpack_require__("./src/components/Foundary/knowledge-browser.tsx"),dialog=__webpack_require__("./src/components/ui/dialog.tsx"),label=__webpack_require__("./src/components/ui/label.tsx"),input=__webpack_require__("./src/components/ui/input.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),ui_select=__webpack_require__("./src/components/ui/select.tsx"),plus=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/plus.js"),x=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/x.js"),save=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/save.js");const AddKnowledgeModal=({isOpen,onClose,onAddKnowledge,knowledgeContexts})=>{const[formData,setFormData]=(0,react.useState)({name:"",description:"",metadata:[]}),suggestedKeys=(()=>{const keysFromContexts=new Set,keysFromDocuments=new Set;return knowledgeContexts.forEach((context=>{context.menuConfig.groupBy.forEach((key=>keysFromContexts.add(key)))})),{contextKeys:Array.from(keysFromContexts).sort(),documentKeys:Array.from(keysFromDocuments).sort(),allKeys:Array.from(new Set([...keysFromContexts,...keysFromDocuments])).sort()}})(),handleMetadataChange=(key,value)=>{setFormData((prev=>{const prevItem=prev.metadata.find((item=>item.key===key));return prevItem&&(prevItem.value=value),{...prev,metadata:[...prev.metadata.filter((item=>item.key!==key)),{key,value}]}}))};return(0,jsx_runtime.jsx)(dialog.lG,{open:isOpen,onOpenChange:()=>{setFormData({name:"",description:"",metadata:[]}),onClose()},children:(0,jsx_runtime.jsxs)(dialog.Cf,{className:"sm:max-w-md",children:[(0,jsx_runtime.jsx)(dialog.c7,{children:(0,jsx_runtime.jsx)(dialog.L3,{children:"Add New Knowledge source"})}),(0,jsx_runtime.jsxs)("form",{onSubmit:e=>{e.preventDefault(),formData.name&&(onAddKnowledge({name:formData.name,description:formData.description,metadata:formData.metadata,source:"payload",visibility:"public",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),setFormData({name:"",description:"",metadata:[]}),onClose())},className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"name",children:"Name *"}),(0,jsx_runtime.jsx)(input.p,{id:"name",value:formData.name,onChange:e=>setFormData((prev=>({...prev,name:e.target.value}))),required:!0})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"name",children:"Description"}),(0,jsx_runtime.jsx)(input.p,{id:"name",value:formData.description,onChange:e=>setFormData((prev=>({...prev,description:e.target.value}))),required:!0})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"metadata",children:"Metadata"}),suggestedKeys.contextKeys.length>0&&(0,jsx_runtime.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Suggested: ",suggestedKeys.contextKeys.slice(0,4).join(", "),suggestedKeys.contextKeys.length>4&&" +"+(suggestedKeys.contextKeys.length-4)]})]}),(0,jsx_runtime.jsxs)(ui_button.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{handleMetadataChange(" ","")},className:"gap-1 h-8",children:[(0,jsx_runtime.jsx)(plus.A,{className:"h-3 w-3"}),"Add"]})]}),formData.metadata&&formData.metadata.length>0?(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:formData.metadata.map((({key,value},index)=>{const suggestedValues=(()=>{const values=new Set;return Array.from(values).sort()})();return(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,jsx_runtime.jsx)(input.p,{value:key,onChange:e=>{var _formData_metadata_find;const newKey=e.target.value||" ",oldValue=null===(_formData_metadata_find=formData.metadata.find((item=>item.key===key)))||void 0===_formData_metadata_find?void 0:_formData_metadata_find.value;setFormData((prev=>{const newMetadata=[...prev.metadata],index=newMetadata.findIndex((item=>item.key===key));return-1!==index&&newMetadata.splice(index,1),newKey&&newMetadata.push({key:newKey,value:oldValue||""}),{...prev,metadata:newMetadata}})),e.target.focus()},placeholder:"Key",className:"w-32 h-8 text-sm",list:`metadata-keys-${key}`}),(0,jsx_runtime.jsx)("datalist",{id:`metadata-keys-${key}`,children:suggestedKeys.allKeys.map((suggestedKey=>(0,jsx_runtime.jsx)("option",{value:suggestedKey},suggestedKey)))}),(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground text-sm",children:"="}),suggestedValues.length>0?(0,jsx_runtime.jsxs)(ui_select.l6,{value:String(value||""),onValueChange:newValue=>((key,value)=>{handleMetadataChange(key,"__custom__"===value?"":value)})(key,newValue),children:[(0,jsx_runtime.jsx)(ui_select.bq,{className:"flex-1 h-8 text-sm",children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Value"})}),(0,jsx_runtime.jsxs)(ui_select.gC,{children:[suggestedValues.map((suggestedValue=>(0,jsx_runtime.jsx)(ui_select.eb,{value:suggestedValue,children:suggestedValue},suggestedValue))),(0,jsx_runtime.jsx)(ui_select.eb,{value:"__custom__",children:(0,jsx_runtime.jsx)("span",{className:"text-muted-foreground text-xs",children:"Custom..."})})]})]}):(0,jsx_runtime.jsx)(input.p,{value:String(value||""),onChange:e=>handleMetadataChange(key,e.target.value),placeholder:"Value",className:"flex-1 h-8 text-sm"}),(0,jsx_runtime.jsx)(ui_button.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(key=>{setFormData((prev=>{const newMetadata=[...prev.metadata],index=newMetadata.findIndex((item=>item.key===key));return-1!==index&&newMetadata.splice(index,1),{...prev,metadata:newMetadata}}))})(key),className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:(0,jsx_runtime.jsx)(x.A,{className:"h-3 w-3"})})]},`metadata-key-${index}`)}))}):(0,jsx_runtime.jsx)("div",{className:"text-center py-3 border border-dashed border-border rounded-lg bg-muted/20",children:(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:'No metadata â€¢ Click "Add" to create fields'})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",size:"sm",onClick:onClose,className:"gap-2",children:[(0,jsx_runtime.jsx)(x.A,{className:"h-4 w-4"}),"Cancel"]}),(0,jsx_runtime.jsxs)(ui_button.$,{type:"submit",children:[(0,jsx_runtime.jsx)(save.A,{className:"h-4 w-4"}),"Create"]})]})]})]})})};AddKnowledgeModal.__docgenInfo={description:"",methods:[],displayName:"AddKnowledgeModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddKnowledge:{required:!0,tsType:{name:"signature",type:"function",raw:"(knowledge: Omit<Knowledge, 'id'>) => void",signature:{arguments:[{type:{name:"Omit",elements:[{name:"Knowledge"},{name:"literal",value:"'id'"}],raw:"Omit<Knowledge, 'id'>"},name:"knowledge"}],return:{name:"void"}}},description:""},knowledgeContexts:{required:!0,tsType:{name:"Array",elements:[{name:"KnowledgeContext"}],raw:"KnowledgeContext[]"},description:""}}};var badge=__webpack_require__("./src/components/ui/badge.tsx"),ui_checkbox=__webpack_require__("./src/components/ui/checkbox.tsx"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const AddTeamContext=({isOpen,onClose,onAddTeamContext})=>{const[formData,setFormData]=(0,react.useState)({label:"",description:"",groupBy:[],sortBy:"name",sortOrder:"asc",showDocumentCount:!0}),[draftGroupBy,setDraftGroupBy]=(0,react.useState)("");return(0,jsx_runtime.jsx)(dialog.lG,{open:isOpen,onOpenChange:()=>{setFormData({label:"",description:"",groupBy:[],sortBy:"name",sortOrder:"asc",showDocumentCount:!0}),onClose()},children:(0,jsx_runtime.jsxs)(dialog.Cf,{className:"sm:max-w-md",children:[(0,jsx_runtime.jsx)(dialog.c7,{children:(0,jsx_runtime.jsx)(dialog.L3,{children:"Add New Knowledge source"})}),(0,jsx_runtime.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("formData",formData),formData.label&&(onAddTeamContext({id:formData.label,label:formData.label,description:formData.description,menuConfig:{groupBy:formData.groupBy,sortBy:formData.sortBy||null,sortOrder:formData.sortOrder,showDocumentCount:formData.showDocumentCount}}),setFormData({label:"",description:"",groupBy:[],sortBy:"name",sortOrder:"asc",showDocumentCount:!0}))},className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"label",children:"Label *"}),(0,jsx_runtime.jsx)(input.p,{id:"label",value:formData.label,onChange:e=>setFormData((prev=>({...prev,label:e.target.value}))),required:!0})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"description",children:"Description"}),(0,jsx_runtime.jsx)(input.p,{id:"description",value:formData.description,onChange:e=>setFormData((prev=>({...prev,description:e.target.value})))})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{children:"Group By"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2",children:formData.groupBy.map((t=>(0,jsx_runtime.jsxs)(badge.E,{variant:"secondary",className:"px-2 py-1",children:[t,(0,jsx_runtime.jsx)("button",{type:"button",className:"ml-1 inline-flex",onClick:()=>{setFormData((prev=>({...prev,groupBy:prev.groupBy.filter((x=>x!==t))})))},"aria-label":`Remove ${t}`,children:(0,jsx_runtime.jsx)(x.A,{className:"h-3 w-3"})})]},t)))}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(input.p,{placeholder:"Type a tag and press Enter",value:draftGroupBy,onChange:e=>setDraftGroupBy(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),setFormData((prev=>({...prev,groupBy:[...prev.groupBy,draftGroupBy]}))),setDraftGroupBy(""))}}),(0,jsx_runtime.jsx)(ui_button.$,{type:"button",onClick:()=>{setFormData((prev=>({...prev,groupBy:[...prev.groupBy,draftGroupBy]}))),setDraftGroupBy("")},children:"Add"})]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"sortBy",children:"Sort By"}),(0,jsx_runtime.jsxs)(ui_select.l6,{value:formData.sortBy,onValueChange:value=>setFormData((prev=>({...prev,sortBy:value}))),children:[(0,jsx_runtime.jsx)(ui_select.bq,{children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Select sort field"})}),(0,jsx_runtime.jsx)(ui_select.gC,{children:[{value:"name",label:"Name"},{value:"createdAt",label:"Created Date"}].map((option=>(0,jsx_runtime.jsx)(ui_select.eb,{value:option.value,children:option.label},option.value)))})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"sortOrder",children:"Sort Order"}),(0,jsx_runtime.jsxs)(ui_select.l6,{value:formData.sortOrder,onValueChange:value=>setFormData((prev=>({...prev,sortOrder:value}))),children:[(0,jsx_runtime.jsx)(ui_select.bq,{children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Select sort order"})}),(0,jsx_runtime.jsx)(ui_select.gC,{children:[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}].map((option=>(0,jsx_runtime.jsx)(ui_select.eb,{value:option.value,children:option.label},option.value)))})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,jsx_runtime.jsx)(ui_checkbox.S,{id:"showDocumentCount",checked:formData.showDocumentCount,onCheckedChange:checked=>setFormData((prev=>({...prev,showDocumentCount:checked})))}),(0,jsx_runtime.jsx)(label.J,{htmlFor:"showDocumentCount",className:"text-sm",children:"Show Document Count"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",size:"sm",onClick:onClose,className:"gap-2",children:[(0,jsx_runtime.jsx)(x.A,{className:"h-4 w-4"}),"Cancel"]}),(0,jsx_runtime.jsxs)(ui_button.$,{type:"submit",children:[(0,jsx_runtime.jsx)(save.A,{className:"h-4 w-4"}),"Create"]})]})]})]})})};AddTeamContext.__docgenInfo={description:"",methods:[],displayName:"AddTeamContext",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddTeamContext:{required:!0,tsType:{name:"signature",type:"function",raw:"(teamContext: TeamKnowledgeContext) => void",signature:{arguments:[{type:{name:"TeamKnowledgeContext"},name:"teamContext"}],return:{name:"void"}}},description:""}}};var KnowledgeView_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function KnowledgeView({documents=[],contexts=[],onDocumentClick=document=>KnowledgeView_console.log("Document clicked:",document),onDocumentShare=document=>KnowledgeView_console.log("Share document:",document),onLoadDocumentContent,selectedDocumentId,onAddKnowledge,onAddTeamContext,onDocumentUpdate}){const[activeContext,setActiveContext]=(0,react.useState)(contexts[0]),[isAddKnowledgeModalOpen,setIsAddKnowledgeModalOpen]=(0,react.useState)(!1),[isAddTeamContextModalOpen,setIsAddTeamContextModalOpen]=(0,react.useState)(!1),handleAddKnowledge=knowledge=>{onAddKnowledge&&onAddKnowledge(knowledge),setIsAddKnowledgeModalOpen(!1)},handleAddTeamContext=teamContext=>{onAddTeamContext&&onAddTeamContext(teamContext),setIsAddTeamContextModalOpen(!1)},Hero=()=>(0,jsx_runtime.jsx)(DashboardHero.H,{title:"Knowledge",description:"Access, manage, and share all your team knowledge in one place.",gradient:"bg-gradient-to-r from-teal-600 via-cyan-600 to-blue-600",primaryAction:onAddKnowledge?{label:"Create",onClick:()=>setIsAddKnowledgeModalOpen(!0)}:void 0,secondaryAction:onAddTeamContext?{label:"Add Context",onClick:()=>setIsAddTeamContextModalOpen(!0)}:void 0}),Modals=()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AddTeamContext,{isOpen:isAddTeamContextModalOpen,onClose:()=>setIsAddTeamContextModalOpen(!1),onAddTeamContext:handleAddTeamContext}),(0,jsx_runtime.jsx)(AddKnowledgeModal,{isOpen:isAddKnowledgeModalOpen,onClose:()=>setIsAddKnowledgeModalOpen(!1),onAddKnowledge:handleAddKnowledge,knowledgeContexts:contexts})]});return contexts&&0!==contexts.length?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col h-full max-h-[calc(100vh-8rem)]",children:[(0,jsx_runtime.jsxs)("div",{className:"px-2 md:px-4 py-4 flex-shrink-0",children:[(0,jsx_runtime.jsx)(Hero,{}),(0,jsx_runtime.jsxs)("div",{className:"mt-6",children:[(0,jsx_runtime.jsx)("div",{className:"border-b border-border",children:(0,jsx_runtime.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:contexts.map((context=>(0,jsx_runtime.jsxs)("button",{onClick:()=>setActiveContext(context),className:"group inline-flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors "+(activeContext.id===context.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"),children:[context.icon,context.label]},context.id)))})}),activeContext.description&&(0,jsx_runtime.jsx)("div",{className:"mt-3 px-1",children:(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:activeContext.description})})]})]}),(0,jsx_runtime.jsx)("div",{className:"flex-1 min-h-0 px-2 md:px-4 pb-4",children:(0,jsx_runtime.jsx)("div",{className:"h-full rounded-3xl border overflow-hidden",children:(0,jsx_runtime.jsx)(knowledge_browser.N,{documents,menuConfig:activeContext.menuConfig,onDocumentClick,onDocumentShare,selectedDocumentId,onDocumentUpdate})})}),(0,jsx_runtime.jsx)(Modals,{})]}):(0,jsx_runtime.jsxs)("div",{className:"flex flex-col h-full max-h-[calc(100vh-8rem)]",children:[(0,jsx_runtime.jsx)("div",{className:"px-2 md:px-4 py-4 flex-shrink-0",children:(0,jsx_runtime.jsx)(Hero,{})}),(0,jsx_runtime.jsx)("div",{className:"flex-1 min-h-0 px-2 md:px-4 pb-4 flex items-center justify-center",children:(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground",children:"No contexts available"})}),(0,jsx_runtime.jsx)(Modals,{})]})}KnowledgeView.__docgenInfo={description:"",methods:[],displayName:"KnowledgeView",props:{documents:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeDocument"}],raw:"KnowledgeDocument[]"},description:"",defaultValue:{value:"[]",computed:!1}},contexts:{required:!1,tsType:{name:"Array",elements:[{name:"KnowledgeContext"}],raw:"KnowledgeContext[]"},description:"",defaultValue:{value:"[]",computed:!1}},onDocumentClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:"",defaultValue:{value:"(document: KnowledgeDocument) => console.log('Document clicked:', document)",computed:!1}},onDocumentShare:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:"",defaultValue:{value:"(document: KnowledgeDocument) => console.log('Share document:', document)",computed:!1}},onLoadDocumentContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(documentId: string) => Promise<string>",signature:{arguments:[{type:{name:"string"},name:"documentId"}],return:{name:"Promise",elements:[{name:"string"}],raw:"Promise<string>"}}},description:""},selectedDocumentId:{required:!1,tsType:{name:"string"},description:""},onAddKnowledge:{required:!1,tsType:{name:"signature",type:"function",raw:"(knowledge: Omit<Knowledge, 'id'>) => void",signature:{arguments:[{type:{name:"Omit",elements:[{name:"Knowledge"},{name:"literal",value:"'id'"}],raw:"Omit<Knowledge, 'id'>"},name:"knowledge"}],return:{name:"void"}}},description:""},onAddTeamContext:{required:!1,tsType:{name:"signature",type:"function",raw:"(teamContext: TeamKnowledgeContext) => void",signature:{arguments:[{type:{name:"TeamKnowledgeContext"},name:"teamContext"}],return:{name:"void"}}},description:""},onDocumentUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(document: KnowledgeDocument) => void",signature:{arguments:[{type:{name:"KnowledgeDocument"},name:"document"}],return:{name:"void"}}},description:""}}}}}]);