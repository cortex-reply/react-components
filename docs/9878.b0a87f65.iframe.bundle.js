"use strict";(self.webpackChunkcortex_react_components=self.webpackChunkcortex_react_components||[]).push([[9878],{"./src/components/CRM/NewCustomerForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>NewCustomerForm});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/ui/button.tsx"),_components_ui_input__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_label__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/label.tsx"),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/textarea.tsx"),_components_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/ui/checkbox.tsx");function NewCustomerForm({onSubmit}){const[customer,setCustomer]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({name:"",intro:"",active:!0});var _customer_intro;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:e=>{e.preventDefault(),customer.name&&(onSubmit({...customer,name:customer.name,updatedAt:(new Date).toISOString(),createdAt:(new Date).toISOString()}),setCustomer({name:"",intro:"",active:!0}))},className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_2__.J,{htmlFor:"customerName",children:"Customer Name"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_3__.p,{id:"customerName",value:customer.name,onChange:e=>setCustomer({...customer,name:e.target.value}),placeholder:"Enter customer name",required:!0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_2__.J,{htmlFor:"customerIntro",children:"Intro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_4__.T,{id:"customerIntro",value:null!==(_customer_intro=customer.intro)&&void 0!==_customer_intro?_customer_intro:"",onChange:e=>setCustomer({...customer,intro:e.target.value}),placeholder:"Enter customer intro"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_checkbox__WEBPACK_IMPORTED_MODULE_5__.S,{id:"activeCustomer",checked:!!customer.active,onCheckedChange:checked=>setCustomer({...customer,active:checked})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_2__.J,{htmlFor:"activeCustomer",children:"Active Customer"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_6__.$,{type:"submit",className:"w-full",children:"Add Customer"})]})}NewCustomerForm.__docgenInfo={description:"",methods:[],displayName:"NewCustomerForm",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:'(customer: Omit<Customer, "id">) => void',signature:{arguments:[{type:{name:"Omit",elements:[{name:"Customer"},{name:"literal",value:'"id"'}],raw:'Omit<Customer, "id">'},name:"customer"}],return:{name:"void"}}},description:""}}}},"./src/components/CRM/NewDealForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>NewDealForm});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.1.3_@babel+core@7.26.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.83.0/node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/ui/button.tsx"),_components_ui_input__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/ui/input.tsx"),_components_ui_label__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/label.tsx"),_components_ui_select__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/select.tsx"),_components_ui_checkbox__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/ui/checkbox.tsx"),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/ui/textarea.tsx"),_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/scroll-area.tsx"),_components_ui_dialog__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/ui/dialog.tsx"),_barrel_optimize_names_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/lucide-react@0.469.0_react@19.0.0/node_modules/lucide-react/dist/esm/icons/plus.js"),_NewCustomerForm__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/CRM/NewCustomerForm.tsx");function NewDealForm({customers,users,categories,onSubmit,initialDeal,onAddCustomer,onClose}){var _deal_customer_id,_deal_customer,_deal_assignee_id,_deal_assignee;const[deal,setDeal]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialDeal||{customer:void 0,value:0,assignee:void 0,status:"Cold",categories:[],dateLogged:(new Date).toISOString().split("T")[0],closureDate:"",comments:[],description:""}),[isCustomerModalOpen,setIsCustomerModalOpen]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[errors,setErrors]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{initialDeal&&setDeal(initialDeal)}),[initialDeal]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const newErrors={};return deal.customer||(newErrors.customer="Customer is required"),deal.value||(newErrors.value="Value is required"),deal.assignee||(newErrors.assignee="Assignee is required"),deal.closureDate||(newErrors.closureDate="Closure Date is required"),setErrors(newErrors),0===Object.keys(newErrors).length})()&&(onSubmit({...deal}),setDeal({customer:void 0,value:0,assignee:void 0,description:"",status:"Cold",closureDate:""}),setErrors({}),null==onClose||onClose())},className:"space-y-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_2__.F,{className:"h-[60vh] pr-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6 px-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:"customer",children:"Customer"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.l6,{value:null===(_deal_customer=deal.customer)||void 0===_deal_customer||null===(_deal_customer_id=_deal_customer.id)||void 0===_deal_customer_id?void 0:_deal_customer_id.toString(),onValueChange:value=>{return setDeal({...deal,customer:(customerID=value,null==customers?void 0:customers.find((customer=>customer.id===Number(customerID))))});var customerID},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.yv,{placeholder:"Select customer"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.gC,{children:customers.map((customer=>{var _customer_id;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.eb,{value:(null===(_customer_id=customer.id)||void 0===_customer_id?void 0:_customer_id.toString())||"",children:customer.name},customer.id)}))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.$,{variant:"outline",size:"icon",onClick:()=>setIsCustomerModalOpen(!0),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"w-5 h-5"})})]}),errors.customerId&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-500 text-sm",children:errors.customerId})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:"value",children:"Value"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_7__.p,{id:"value",type:"number",value:deal.value||"",onChange:e=>setDeal({...deal,value:Number.parseFloat(e.target.value)}),placeholder:"Enter deal value"}),errors.value&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-500 text-sm",children:errors.value})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:"assignee",children:"Assignee"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.l6,{value:null===(_deal_assignee=deal.assignee)||void 0===_deal_assignee||null===(_deal_assignee_id=_deal_assignee.id)||void 0===_deal_assignee_id?void 0:_deal_assignee_id.toString(),onValueChange:value=>{return setDeal({...deal,assignee:(userId=value,null==users?void 0:users.find((user=>user.id===Number(userId))))});var userId},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.yv,{placeholder:"Select assignee"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.gC,{children:users&&users.map((user=>{var _user_id;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.eb,{value:(null===(_user_id=user.id)||void 0===_user_id?void 0:_user_id.toString())||"",children:user.name},user.id)}))})]}),errors.assignee&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-500 text-sm",children:errors.assignee})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:"description",children:"Description"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_8__.T,{id:"description",value:deal.description||"",onChange:e=>setDeal({...deal,description:e.target.value}),placeholder:"Enter deal description"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{children:"Categories"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-4",children:["proposition","source","sector"].map((type=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-sm font-medium",children:type.charAt(0).toUpperCase()+type.slice(1)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-2 gap-2",children:categories.filter((category=>category.type===type)).map((category=>{var _deal_categories;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_checkbox__WEBPACK_IMPORTED_MODULE_9__.S,{id:category.id.toString(),checked:null===(_deal_categories=deal.categories)||void 0===_deal_categories?void 0:_deal_categories.includes(category.id),onCheckedChange:()=>(category=>{setDeal((prevDeal=>({...prevDeal,categories:(prevDeal.categories||[]).includes(category)?(prevDeal.categories||[]).filter((id=>id!==category)):[...prevDeal.categories||[],category]})))})(category)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:category.id.toString(),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:category.name})]},category.id)}))})]},type)))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_3__.J,{htmlFor:"closureDate",children:"Closure Date"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_7__.p,{id:"closureDate",type:"date",value:deal.closureDate||"",onChange:e=>setDeal({...deal,closureDate:e.target.value})}),errors.closureDate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-500 text-sm",children:errors.closureDate})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_5__.$,{type:"submit",className:"w-full",children:initialDeal?"Update Deal":"Add Deal"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_10__.lG,{open:isCustomerModalOpen,onOpenChange:setIsCustomerModalOpen,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_10__.Cf,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_10__.c7,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_10__.L3,{children:"Add New Customer"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_NewCustomerForm__WEBPACK_IMPORTED_MODULE_11__.n,{onSubmit:newCustomer=>{setDeal({...deal,customer:newCustomer}),setIsCustomerModalOpen(!1),onAddCustomer(newCustomer)}})]})})]})}NewDealForm.__docgenInfo={description:"",methods:[],displayName:"NewDealForm",props:{customers:{required:!0,tsType:{name:"Array",elements:[{name:"Customer"}],raw:"Customer[]"},description:""},users:{required:!1,tsType:{name:"Array",elements:[{name:"User"}],raw:"User[]"},description:""},categories:{required:!0,tsType:{name:"Array",elements:[{name:"DealCategory"}],raw:"DealCategory[]"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(deal: Deal) => void",signature:{arguments:[{type:{name:"Deal"},name:"deal"}],return:{name:"void"}}},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onAddCustomer:{required:!0,tsType:{name:"signature",type:"function",raw:"(newCustomer: Partial<Customer>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"Customer"}],raw:"Partial<Customer>"},name:"newCustomer"}],return:{name:"void"}}},description:""},initialDeal:{required:!1,tsType:{name:"Deal"},description:""}}}}}]);